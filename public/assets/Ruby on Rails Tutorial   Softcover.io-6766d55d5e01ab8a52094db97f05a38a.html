<!DOCTYPE html>
<!-- saved from url=(0072)http://www.railstutorial.org/book/filling_in_the_layout#code-route_tests -->
<html id="custDomain"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script async="" src="./Ruby on Rails Tutorial   Softcover.io_files/analytics.js"></script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"beacon-2.newrelic.com","errorBeacon":"jserror.newrelic.com","licenseKey":"1310fd97f1","applicationID":"4014257","transactionName":"IVZWR0tbWF4BFxhWVw1SSxxaQUdGCwhoRl0DXQ==","queueTime":19,"applicationTime":102,"ttGuid":"","agentToken":null,"agent":"js-agent.newrelic.com/nr-411.min.js"}</script>
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(t,n,e){function r(e){if(!n[e]){var o=n[e]={exports:{}};t[e][0].call(o.exports,function(n){var o=t[e][1][n];return r(o?o:n)},o,o.exports)}return n[e].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<e.length;o++)r(e[o]);return r}({D5DuLP:[function(t,n){function e(t,n){var e=r[t];return e?e.apply(this,n):(o[t]||(o[t]=[]),void o[t].push(n))}var r={},o={};n.exports=e,e.queues=o,e.handlers=r},{}],handle:[function(t,n){n.exports=t("D5DuLP")},{}],G9z0Bl:[function(t,n){function e(){var t=l.info=NREUM.info;if(t&&t.agent&&t.licenseKey&&t.applicationID&&p&&p.body){l.proto="https"===f.split(":")[0]||t.sslForHttp?"https://":"http://",i("mark",["onload",a()]);var n=p.createElement("script");n.src=l.proto+t.agent,p.body.appendChild(n)}}function r(){"complete"===p.readyState&&o()}function o(){i("mark",["domContent",a()])}function a(){return(new Date).getTime()}var i=t("handle"),u=window,p=u.document,s="addEventListener",c="attachEvent",f=(""+location).split("?")[0],l=n.exports={offset:a(),origin:f,features:[]};p[s]?(p[s]("DOMContentLoaded",o,!1),u[s]("load",e,!1)):(p[c]("onreadystatechange",r),u[c]("onload",e)),i("mark",["firstbyte",a()])},{handle:"D5DuLP"}],loader:[function(t,n){n.exports=t("G9z0Bl")},{}]},{},["G9z0Bl"]);</script>

<title>Ruby on Rails Tutorial |  Softcover.io</title>
<meta charset="UTF-8">
<script>
  window.Config = {
    bucket: "softcover"
  }
</script>
<link href="./Ruby on Rails Tutorial   Softcover.io_files/reading-3ae9a75b566c66d8c3b8a26082878a6d.css" media="screen" rel="stylesheet" type="text/css">
<link href="./Ruby on Rails Tutorial   Softcover.io_files/print-ca85c1c74168e935ca4e2e958a3a5c2b.css" media="print" rel="stylesheet" type="text/css">
<script src="./Ruby on Rails Tutorial   Softcover.io_files/jquery.min.js" type="text/javascript"></script>
<script src="./Ruby on Rails Tutorial   Softcover.io_files/jquery.formalize.min.js" type="text/javascript"></script>
<script src="./Ruby on Rails Tutorial   Softcover.io_files/underscore-min.js" type="text/javascript"></script>
<script src="./Ruby on Rails Tutorial   Softcover.io_files/saved_resource" type="text/javascript"></script>
<script src="./Ruby on Rails Tutorial   Softcover.io_files/application-866dcf1560064757ad2abe4982e48ea8.js" type="text/javascript"></script>
<meta content="authenticity_token" name="csrf-param">
<meta content="MaJd7g67tOksoq6jV9aDZVenmTsn/KyLoeRubrMPWUQ=" name="csrf-token">
<link href="http://www.railstutorial.org/apple-touch-icon-precomposed.png" rel="apple-touch-icon-precomposed">
<link href="./Ruby on Rails Tutorial   Softcover.io_files/css" rel="stylesheet" type="text/css">
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<script>
  // test key only
  // this identifies your website in the createToken call below
  Stripe.setPublishableKey('pk_live_Xn1p0BfxqKxkAxtEr03P7wmd');
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('require', 'linker');
  ga('linker:autoLink', ['www.railstutorial.org', 'softcover.io']);

  ga('create', 'UA-46858978-1', 'softcover.io', {'allowLinker': true});
  ga('send', 'pageview');

  ga('create', 'UA-8667566-1', 'auto', {
    'name': 'book',
    'allowLinker': true
  });

  ga('book.send', 'pageview');

</script>
<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>


<script src="./Ruby on Rails Tutorial   Softcover.io_files/custom_domain_js.js" type="text/javascript"></script>
<style id="clearly_highlighting_css" type="text/css">/* selection */ html.clearly_highlighting_enabled ::-moz-selection { background: rgba(246, 238, 150, 0.99); } html.clearly_highlighting_enabled ::selection { background: rgba(246, 238, 150, 0.99); } /* cursor */ html.clearly_highlighting_enabled {    /* cursor and hot-spot position -- requires a default cursor, after the URL one */    cursor: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--cursor.png") 14 16, text; } /* highlight tag */ em.clearly_highlight_element {    font-style: inherit !important; font-weight: inherit !important;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow.png");    background-repeat: repeat-x; background-position: top left; background-size: 100% 100%; } /* the delete-buttons are positioned relative to this */ em.clearly_highlight_element.clearly_highlight_first { position: relative; } /* delete buttons */ em.clearly_highlight_element a.clearly_highlight_delete_element {    display: none; cursor: pointer;    padding: 0; margin: 0; line-height: 0;    position: absolute; width: 34px; height: 34px; left: -17px; top: -17px;    background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite.png"); background-repeat: no-repeat; background-position: 0px 0px; } em.clearly_highlight_element a.clearly_highlight_delete_element:hover { background-position: -34px 0px; } /* retina */ @media (min--moz-device-pixel-ratio: 2), (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {    em.clearly_highlight_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--yellow@2x.png"); }    em.clearly_highlight_element a.clearly_highlight_delete_element { background-image: url("chrome-extension://pioclpoplcdbaefihamjohnefbikjilc/clearly/images/highlight--delete-sprite@2x.png"); background-size: 68px 34px; } } </style><style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none; }[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x; }[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y; }[touch-action="scroll"],[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y; }</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script id="mathJaxJS" type="text/javascript" src="./Ruby on Rails Tutorial   Softcover.io_files/MathJax.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Hover_Arrow {position: absolute; width: 15px; height: 11px; cursor: pointer}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; color: #666666}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_Menu_Close {position: absolute; width: 31px; height: 31px; top: -15px; left: -15px}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div><div id="MathJax_Message" style="display: none;"></div><div id="MathJax_Message" style="display: none;"></div><div id="MathJax_Message" style="display: none;"></div>
<div class="container">
<div class="container_footer">
<div id="header">
<div class="wrapper">
<a href="http://www.railstutorial.org/" class="logo"><img alt="Logo" src="./Ruby on Rails Tutorial   Softcover.io_files/logo-e741419bc04d21db7e60ddc10883b4f9.png">
</a><div class="j_userHeader" style="display:inline"><ul class="headerMenu">
<li><a href="http://www.softcover.io/login">Log In</a></li>
<li><a href="http://www.softcover.io/account/sign_up">Sign Up</a></li>
</ul>
</div>
<div id="dropBG"></div>
<div class="clear"></div>
</div>
</div>

<div id="pageBook">
<div id="bookHeader">
<div class="wrapper">
<div class="bookCover">
<a href="http://www.railstutorial.org/book"><img alt="Cover-web" class="cover" src="./Ruby on Rails Tutorial   Softcover.io_files/cover-web.png">
<img alt="Cover_bg" class="coverBG" src="./Ruby on Rails Tutorial   Softcover.io_files/cover_bg-88b6816f72bba1e853bbfcd1caff472a.png">
<p>
<i class="ibooksMedia iRead"></i>
READ ONLINE FREE
</p>
</a></div>
<div class="bookInfo">
<h1>
Ruby on Rails Tutorial
<span class="j_subtitle">Learn Rails by Example</span>
<strong>Michael Hartl</strong>
</h1>
<p class="j_description">
 The Ruby on Rails Tutorial book and screencast series teach you how to develop and deploy real, industrial-strength web applications with Ruby on Rails, the open-source web framework that powers top websites such as Twitter, Hulu, GitHub, and the Yellow Pages. The Ruby on Rails Tutorial book is available for free online and is available for purchase as an ebook (PDF, EPUB, and MOBI formats). The companion screencast series includes 15 individual lessons (including a new Rails 4.0 supplement) totaling more than 15 hours, with one lesson for each chapter of the Ruby on Rails Tutorial book. The best value is the ebook/screencast bundle, which includes the 2nd edition book, the Rails 4.0–compatible version, the 2nd edition screencast series, and the Rails 4.0 supplementary screencasts. 
</p>

<div class="bookControls">
<a href="http://www.railstutorial.org/"><button class="transBG">Book Info</button>
</a><a href="mailto:admin@railstutorial.org"><button class="transBG buttonIcon buttonContact"></button>
</a></div>

</div>

</div>
</div>

<div id="bookMenu" class="bookMenuFixed">
<div class="wrapper">
<div class="bookMenuControls">
<div class="bookMenuArows">
<a href="javascript://" class="leftArrow">◄</a>
<a href="javascript://" class="upArrow">▲</a>
<a href="javascript://" class="rightArrow">►</a>
</div>
<div class="bookMenuSize">
<a href="javascript://" class="current" id="sizeRegular"></a>
<a href="javascript://" id="sizeBig"></a>
<a href="javascript://" id="sizeBigger"></a>
</div>
<div class="bookMenuSearch">
<a href="javascript://" id="j_singlePage"><i class="fa fa-search"></i>
Single Page
</a></div>
</div>
<div class="dropDown" id="j_chapterDropDown">
<span id="chapterTitle">Chapter 5: Filling in the layout
</span>
<ul class="dropMenu"><li><a>Frontmatter
</a></li><li><a>Chapter 1: From zero to deploy
</a></li><li><a>Chapter 2: A demo app
</a></li><li><a>Chapter 3: Mostly static pages
</a></li><li><a>Chapter 4: Rails-flavored Ruby
</a></li><li><a>Chapter 5: Filling in the layout
</a></li><li><a>Chapter 6: Modeling users
</a></li><li><a>Chapter 7: Sign up
</a></li><li><a>Chapter 8: Sign in, sign out
</a></li><li><a>Chapter 9: Updating, showing, and deleting users
</a></li><li><a>Chapter 10: User microposts
</a></li><li><a>Chapter 11: Following users
</a></li></ul>
</div>
<div class="bookMenuActions j_downloadLinks"><a href="" onclick="$(&#39;#bookMenuEmail&#39;).slideToggle(); return false"><button class="greyButton iEmailUpdate">❤</button>
</a><a href="http://www.railstutorial.org/#pricing" class="buttonStyle attention">Buy Now</a>
<a href="http://www.softcover.io/downloads/28fdb94f/ruby_on_rails_tutorial"><button>Download Previews</button>
</a></div>
</div>
<div id="bookMenuEmail" style="display:none">
<div class="wrapper">
<div class="emailSignup">
<label>Follow this book and get notified of updates</label>
<form accept-charset="UTF-8" action="http://www.softcover.io/follow/28fdb94f/ruby_on_rails_tutorial" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
<input name="email" placeholder="YOUR EMAIL ADDRESS" type="text">
<input class="greyButton" type="submit" value="Submit Email">
</form>

</div>

</div>
</div>
</div>
<div class="wrapper" id="bookWr">
<div class="bookChapterTop">Chapter 5: Filling in the layout
</div>
<!-- #bookSidebar -->
<!-- - @book.screencasts.each do |screencast| -->
<!-- .bookScreenItem{"data-chapter-number" => screencast.chapter.try(:chapter_number)} -->
<!-- = image_tag "standin_ScreenThumb.png" -->
<!-- %p= screencast -->
<div id="bookHtml" style="opacity: 1;"><div id="book"><div id="_cha-filling_in_the_layout" data-tralics-id="cid26" class="chapter" data-number="5" data-chapter="filling_in_the_layout"><h1><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-filling_in_the_layout" class="heading hyperref"><span class="number">Chapter 5 </span>Filling in the layout</a></h1>
<p>In the process of taking a brief tour of Ruby in <a href="http://www.railstutorial.org/book/rails_flavored_ruby#cha-rails_flavored_ruby" class="hyperref">Chapter&nbsp;<span class="ref">4</span></a>, we learned about including the application stylesheet into the sample application—but, as noted in <a href="http://www.railstutorial.org/book/rails_flavored_ruby#sec-css_revisited" class="hyperref">Section&nbsp;<span class="ref">4.3.4</span></a>, this stylesheet is currently empty.<span class="intersentencespace"></span> In this chapter, we’ll change this by incorporating the <em>Bootstrap</em> framework into our application, and then we’ll add some custom styles of our own.<sup id="_cha-5_footnote-ref-1" class="footnote intersentence"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-1">1</a></sup><span class="intersentencespace"></span> We’ll also start filling in the layout with links to the pages (such as Home and About) that we’ve created so far (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-structure" class="hyperref">Section&nbsp;<span class="ref">5.1</span></a>).<span class="intersentencespace"></span> Along the way, we’ll learn about partials, Rails routes, and the asset pipeline, including an introduction to Sass (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass_and_the_asset_pipeline" class="hyperref">Section&nbsp;<span class="ref">5.2</span></a>).<span class="intersentencespace"></span> We’ll also refactor the tests from <a href="http://www.railstutorial.org/book/static_pages#cha-static_pages" class="hyperref">Chapter&nbsp;<span class="ref">3</span></a> using the latest RSpec techniques.<span class="intersentencespace"></span> We’ll end by taking a first important step toward letting users sign up to our site.</p>
</div><div id="_sec-structure" data-tralics-id="cid27" class="section" data-number="5.1"><h2><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-structure" class="heading hyperref"><span class="number">5.1 </span>Adding some structure</a></h2>
<p>The <em>Rails Tutorial</em> is a book on web development, not web design, but it would be depressing to work on an application that looks like <em>complete</em> crap, so in this section we’ll add some structure to the layout and give it some minimal styling with CSS. In addition to using some custom CSS rules, we’ll make use of <a href="http://getbootstrap.com/">Bootstrap</a>, an open-source web design framework from Twitter.<span class="intersentencespace"></span> We’ll also give our <em>code</em> some styling, so to speak, using <em>partials</em> to tidy up the layout once it gets a little cluttered.</p>
<p>When building web applications, it is often useful to get a high-level overview of the user interface as early as possible.<span class="intersentencespace"></span> Throughout the rest of this book, I will thus often include <em>mockups</em> (in a web context often called <em>wireframes</em>), which are rough sketches of what the eventual application will look like.<sup id="_cha-5_footnote-ref-2" class="footnote intersentence"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-2">2</a></sup><span class="intersentencespace"></span> In this chapter, we will principally be developing the static pages introduced in <a href="http://www.railstutorial.org/book/static_pages#sec-static_pages" class="hyperref">Section&nbsp;<span class="ref">3.1</span></a>, including a site logo, a navigation header, and a site footer.<span class="intersentencespace"></span> A mockup for the most important of these pages, the Home page, appears in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-home_page_mockup" class="hyperref">Figure&nbsp;<span class="ref">5.1</span></a>.<span class="intersentencespace"></span> You can see the final result in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-site_with_footer" class="hyperref">Figure&nbsp;<span class="ref">5.7</span></a>.<span class="intersentencespace"></span> You’ll note that it differs in some details—for example, we’ll end up adding a Rails logo on the page—but that’s fine, since a mockup need not be exact.</p>
<div class="center figure" id="_fig-home_page_mockup" data-tralics-id="uid337" data-number="5.1">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/home_page_mockup_bootstrap.png" alt="images/figures/home_page_mockup_bootstrap"></div><div class="caption"><span class="header">Figure 5.1: </span><span class="description">A mockup of the sample application’s Home page.
</span></div></div>
<p>As usual, if you’re using Git for version control, now would be a good time to make a new branch:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> git checkout -b filling-in-layout
</pre></div></div>
<div id="_sec-adding_to_the_layout" data-tralics-id="uid338" class="subsection" data-number="5.1.1"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-adding_to_the_layout" class="heading hyperref"><span class="number">5.1.1 </span>Site navigation</a></h3>
<p>As a first step toward adding links and styles to the sample application, we’ll update the site layout file <code>application.html.erb</code> (last seen in <a href="http://www.railstutorial.org/book/rails_flavored_ruby#code-application_layout_full_title" class="hyperref">Listing&nbsp;<span class="ref">4.3</span></a>) with additional HTML structure.<span class="intersentencespace"></span> This includes some additional divisions, some CSS classes, and the start of our site navigation.<span class="intersentencespace"></span> The full file is in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_new_structure" class="hyperref">Listing&nbsp;<span class="ref">5.1</span></a>; explanations for the various pieces follow immediately thereafter.<span class="intersentencespace"></span> If you’d rather not delay gratification, you can see the results in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-layout_no_logo_or_custom_css" class="hyperref">Figure&nbsp;<span class="ref">5.2</span></a>.<span class="intersentencespace"></span> (<em>Note:</em> it’s not (yet) very gratifying.)</p>
<div class="codelisting" id="_code-layout_new_structure" data-tralics-id="uid339" data-number="5.1"><div class="heading"><span class="number">Listing 5.1:</span> 

<span class="description">The site layout with added structure.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/application.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">full_title</span><span class="p">(</span><span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">))</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="ss">media</span><span class="p">:</span> <span class="s2">"all"</span><span class="p">,</span>
                                           <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>
    <span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">    &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;</span>
<span class="c">    &lt;![endif]--&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"navbar navbar-fixed-top navbar-inverse"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-inner"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
          <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"sample app"</span><span class="p">,</span> <span class="s1">'#'</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">"logo"</span> <span class="cp">%&gt;</span>
          <span class="nt">&lt;nav&gt;</span>
            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav pull-right"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Home"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Help"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
              <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;/ul&gt;</span>
          <span class="nt">&lt;/nav&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/header&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div></div></div><p>Let’s look at the new elements in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_new_structure" class="hyperref">Listing&nbsp;<span class="ref">5.1</span></a> from top to bottom.<span class="intersentencespace"></span> As alluded to briefly in <a href="http://www.railstutorial.org/book/static_pages#sec-passing_title_tests" class="hyperref">Section&nbsp;<span class="ref">3.3.2</span></a>, Rails&nbsp;4 uses HTML5 by default (as indicated by the doctype <code>&lt;!DOCTYPE html&gt;</code>); since the HTML5 standard is relatively new, some browsers (especially older versions Internet Explorer) don’t fully support it, so we include some JavaScript code (known as an “<a href="http://code.google.com/p/html5shim/">HTML5 shim</a>”) to work around the issue:</p>
<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
</pre></div></div>
<p>The somewhat odd syntax</p>
<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
</pre></div></div>
<p>includes the enclosed line only if the version of Microsoft Internet Explorer&nbsp;(IE) is less than&nbsp;9 (<code>if lt IE 9</code>).<span class="intersentencespace"></span> The weird <code>[if lt IE 9]</code> syntax is <em>not</em> part of Rails; it’s actually a <a href="http://en.wikipedia.org/wiki/Conditional_comment">conditional comment</a> supported by Internet Explorer browsers for just this sort of situation.<span class="intersentencespace"></span> It’s a good thing, too, because it means we can include the HTML5 shim <em>only</em> for IE browsers less than version&nbsp;9, leaving other browsers such as Firefox, Chrome, and Safari unaffected.</p>
<p>The next section includes a <code>header</code> for the site’s (plain-text) logo, a couple of divisions (using the <code>div</code> tag), and a list of elements with navigation links:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"navbar navbar-fixed-top navbar-inverse"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-inner"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"sample app"</span><span class="p">,</span> <span class="s1">'#'</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">"logo"</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;nav&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav pull-right"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Home"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Help"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/nav&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div></div>
<p>Here the <code>header</code> tag indicates elements that should go at the top of the page.<span class="intersentencespace"></span> We’ve given the <code>header</code> tag three <em>CSS classes</em>,<sup id="_cha-5_footnote-ref-3" class="footnote"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-3">3</a></sup> called <code>navbar</code>, <code>navbar-fixed-top</code>, and <code>navbar-inverse</code>, separated by spaces:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"navbar navbar-fixed-top navbar-inverse"</span><span class="nt">&gt;</span>
</pre></div></div>
<p>All HTML elements can be assigned both classes and <em>ids</em>; these are merely labels, and are useful for styling with CSS (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-custom_css" class="hyperref">Section&nbsp;<span class="ref">5.1.2</span></a>).<span class="intersentencespace"></span> The main difference between classes and ids is that classes can be used multiple times on a page, but ids can be used only once.<span class="intersentencespace"></span> In the present case, all the navbar classes have special meaning to the Bootstrap framework, which we’ll install and use in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-custom_css" class="hyperref">Section&nbsp;<span class="ref">5.1.2</span></a>.</p>
<p>Inside the <code>header</code> tag, we see a couple of <code>div</code> tags:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-inner"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
</pre></div></div>
<p>The <code>div</code> tag is a generic division; it doesn’t do anything apart from divide the document into distinct parts.<span class="intersentencespace"></span> In older-style HTML, <code>div</code> tags are used for nearly all site divisions, but HTML5 adds the <code>header</code>, <code>nav</code>, and <code>section</code> elements for divisions common to many applications.<span class="intersentencespace"></span> In this case, each <code>div</code> has a CSS class as well.<span class="intersentencespace"></span> As with the <code>header</code> tag’s classes, these classes have special meaning to Bootstrap.</p>
<p>After the divs, we encounter some embedded Ruby:</p>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"sample app"</span><span class="p">,</span> <span class="s1">'#'</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">"logo"</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav pull-right"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Home"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Help"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div></div>
<p>This uses the Rails helper <code>link_to</code> to create links (which we created directly with the anchor tag&nbsp;<code>a</code> in <a href="http://www.railstutorial.org/book/static_pages#sec-passing_title_tests" class="hyperref">Section&nbsp;<span class="ref">3.3.2</span></a>); the first argument to <code>link_to</code> is the link text, while the second is the URL. We’ll fill in the URLs with <em>named routes</em> in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-named_routes" class="hyperref">Section&nbsp;<span class="ref">5.3.3</span></a>, but for now we use the stub URL <code>’#’</code> commonly used in web design.<span class="intersentencespace"></span> The third argument is an options hash, in this case adding the CSS&nbsp;id <code>logo</code> to the sample app link.<span class="intersentencespace"></span> (The other three links have no options hash, which is fine since it’s optional.)<span class="intersentencespace"></span> Rails helpers often take options hashes in this way, giving us the flexibility to add arbitrary HTML options without ever leaving Rails.</p>
<p>The second element inside the divs is a list of navigation links, made using the <em>unordered list</em> tag <code>ul</code>, together with the <em>list item</em> tag <code>li</code>:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav pull-right"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Home"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Help"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div></div>
<p>The <code>nav</code> tag, though formally unnecessary here, communicates the purpose of the navigation links.<span class="intersentencespace"></span> The <code>nav</code> and <code>pull-right</code> classes on the <code>ul</code> tag have special meaning to Bootstrap.<span class="intersentencespace"></span> Once Rails has processed this layout and evaluated the embedded Ruby, the list looks like this:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav pull-right"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Help<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Sign in<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></div></div>
<p>The final part of the layout is a <code>div</code> for the main content:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
  <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div></div>
<p>As before, the <code>container</code> class has special meaning to Bootstrap.<span class="intersentencespace"></span> As we learned in <a href="http://www.railstutorial.org/book/static_pages#sec-layouts" class="hyperref">Section&nbsp;<span class="ref">3.3.4</span></a>, the <code>yield</code> method inserts the contents of each page into the site layout.</p>
<p>Apart from the site footer, which we’ll add in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-partials" class="hyperref">Section&nbsp;<span class="ref">5.1.3</span></a>, our layout is now complete, and we can look at the results by visiting the Home page.<span class="intersentencespace"></span> To take advantage of the upcoming style elements, we’ll add some extra elements to
the <code>home.html.erb</code> view (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-signup_button" class="hyperref">Listing&nbsp;<span class="ref">5.2</span></a>).</p>
<div class="codelisting" id="_code-signup_button" data-tralics-id="uid341" data-number="5.2"><div class="heading"><span class="number">Listing 5.2:</span> 

<span class="description">The Home page with a link to the signup page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/static_pages/home.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"center hero-unit"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Welcome to the Sample App<span class="nt">&lt;/h1&gt;</span>

  <span class="nt">&lt;h2&gt;</span>
    This is the home page for the
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://railstutorial.org/"</span><span class="nt">&gt;</span>Ruby on Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    sample application.
  <span class="nt">&lt;/h2&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign up now!"</span><span class="p">,</span> <span class="s1">'#'</span><span class="p">,</span> <span class="ss">class</span><span class="p">:</span> <span class="s2">"btn btn-large btn-primary"</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">"rails.png"</span><span class="p">,</span> <span class="ss">alt</span><span class="p">:</span> <span class="s2">"Rails"</span><span class="p">),</span> <span class="s1">'http://rubyonrails.org/'</span> <span class="cp">%&gt;</span>
</pre></div></div></div><p>In preparation for adding users to our site in <a href="http://www.railstutorial.org/book/sign_up#cha-sign_up" class="hyperref">Chapter&nbsp;<span class="ref">7</span></a>, the first <code>link_to</code> creates a stub link of the form</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">class=</span><span class="s">"btn btn-large btn-primary"</span><span class="nt">&gt;</span>Sign up now!<span class="nt">&lt;/a&gt;</span>
</pre></div></div>
<p>In the <code>div</code> tag, the <code>hero-unit</code> CSS class has a special meaning to Bootstrap, as do the <code>btn</code>, <code>btn-large</code>, and <code>btn-primary</code> classes in the signup button.</p>
<p>The second <code>link_to</code> shows off the <code>image_tag</code> helper, which takes as arguments the path to an image and an optional options hash, in this case setting the <code>alt</code> attribute of the image tag using symbols.<span class="intersentencespace"></span> To make this clearer, let’s look at the HTML this tag produces:<sup id="_cha-5_footnote-ref-4" class="footnote"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-4">4</a></sup></p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"Rails"</span> <span class="na">src=</span><span class="s">"/assets/rails.png"</span> <span class="nt">/&gt;</span>
</pre></div></div>
<p>(Note that the <code>src</code> attribute <em>doesn’t</em> include <code>images</code>; Rails automatically makes the association of the file with the <code>images</code> directory on the server.<span class="intersentencespace"></span> Placing all the assets in the same <code>assets</code> directory allows them to be served faster.)<span class="intersentencespace"></span> The <code>alt</code> attribute is what will be displayed if there is no image, and it is also what will be displayed by screen readers for the visually impaired.<span class="intersentencespace"></span> Although people are sometimes sloppy about including the <code>alt</code> attribute for images, it is in fact required by the HTML standard.<span class="intersentencespace"></span> Luckily, Rails includes a default <code>alt</code> attribute; if you don’t specify the attribute in the call to <code>image_tag</code>, Rails just uses the image filename (minus extension).<span class="intersentencespace"></span> In this case, though, we’ve set the <code>alt</code> text explicitly in order to capitalize “Rails”.</p>
<p>In previous versions of Rails, the <code>rails.png</code> logo was included automatically with every Rails project, but in the latest version it doesn’t get generated as part of <code>rails new</code>, so you should download it from the main Ruby on Rails page at <a href="http://rubyonrails.org/images/rails.png">http://rubyonrails.org/images/rails.png</a> and place it in the <code>app/assets/images/</code> directory.<span class="intersentencespace"></span> (You may also have to create that directory as well, either with <code>mkdir</code> or with a graphical file manager.)<span class="intersentencespace"></span> Because we used the <code>image_tag</code> helper in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-signup_button" class="hyperref">Listing&nbsp;<span class="ref">5.2</span></a>, Rails will automatically find any images in that directory using the asset pipeline (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass_and_the_asset_pipeline" class="hyperref">Section&nbsp;<span class="ref">5.2</span></a>).</p>
<p>Now we’re finally ready to see the fruits of our labors (<a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-layout_no_logo_or_custom_css" class="hyperref">Figure&nbsp;<span class="ref">5.2</span></a>).<span class="intersentencespace"></span> Pretty underwhelming, you say?<span class="intersentencespace"></span> Perhaps so.<span class="intersentencespace"></span> Happily, though, we’ve done a good job of giving our HTML elements sensible classes, which puts us in a great position to add style to the site with CSS.</p>
<div class="center figure" id="_fig-layout_no_logo_or_custom_css" data-tralics-id="uid343" data-number="5.2">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/layout_no_logo_or_custom_css_bootstrap_rails_4.png" alt="images/figures/layout_no_logo_or_custom_css_bootstrap_rails_4"></div><div class="caption"><span class="header">Figure 5.2: </span><span class="description">The Home page (<a href="http://localhost:3000/static_pages/home">/static_pages/home</a>) with no custom CSS.
</span></div></div>
</div>
<div id="_sec-custom_css" data-tralics-id="uid344" class="subsection" data-number="5.1.2"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-custom_css" class="heading hyperref"><span class="number">5.1.2 </span>Bootstrap and custom CSS</a></h3>
<p>In <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-adding_to_the_layout" class="hyperref">Section&nbsp;<span class="ref">5.1.1</span></a>, we associated many of the HTML elements with CSS classes, which gives us considerable flexibility in constructing a layout based on CSS. As noted in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-adding_to_the_layout" class="hyperref">Section&nbsp;<span class="ref">5.1.1</span></a>, many of these classes are specific to <a href="http://getbootstrap.com/">Bootstrap</a>, a framework from Twitter that makes it easy to add nice web design and user interface elements to an HTML5 application.<span class="intersentencespace"></span> In this section, we’ll combine Bootstrap with some custom CSS rules to start adding some style to the sample application.</p>
<p>Our first step is to add Bootstrap, which in Rails applications can be accomplished with the <span class="tt">bootstrap-sass</span> gem, as shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-bootstrap_sass" class="hyperref">Listing&nbsp;<span class="ref">5.3</span></a>.<span class="intersentencespace"></span> (To fix a version incompatibility, <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-bootstrap_sass" class="hyperref">Listing&nbsp;<span class="ref">5.3</span></a> also fixes the version of <em>Sprockets</em>, part of the asset pipeline covered in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass_and_the_asset_pipeline" class="hyperref">Section&nbsp;<span class="ref">5.2</span></a>.)<span class="intersentencespace"></span> The Bootstrap framework natively uses the <a href="http://lesscss.org/">LESS CSS</a> language for making dynamic stylesheets, but the Rails asset pipeline supports the (very similar) Sass language by default (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass_and_the_asset_pipeline" class="hyperref">Section&nbsp;<span class="ref">5.2</span></a>), so <span class="tt">bootstrap-sass</span> converts LESS to Sass and makes all the necessary Bootstrap files available to the current application.<sup id="_cha-5_footnote-ref-5" class="footnote"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-5">5</a></sup></p>
<div class="codelisting" id="_code-bootstrap_sass" data-tralics-id="uid346" data-number="5.3"><div class="heading"><span class="number">Listing 5.3:</span> 

<span class="description">Adding the <span class="tt">bootstrap-sass</span> gem to the <code>Gemfile</code>.</span>
</div>

<div class="code"><div class="highlight"><pre><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
<span class="n">ruby</span> <span class="s1">'2.0.0'</span>
<span class="c1">#ruby-gemset=railstutorial_rails_4_0</span>

<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'4.0.5'</span>
<span class="n">gem</span> <span class="s1">'bootstrap-sass'</span><span class="p">,</span> <span class="s1">'2.3.2.0'</span>
<span class="n">gem</span> <span class="s1">'sprockets'</span><span class="p">,</span> <span class="s1">'2.11.0'</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
</pre></div></div></div><p>To install Bootstrap, we run <code>bundle install</code> as usual:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle install
</pre></div></div>
<p>Then restart the web server to incorporate the changes into the development application.<span class="intersentencespace"></span> (On most systems, restarting the server will involve pressing <span class="tt">Ctrl-C</span> and then running <code>rails server</code>.)<span class="intersentencespace"></span> Finally, as of Rails&nbsp;4.0 we need to add a line to <code>config/application.rb</code> to make <span class="tt">bootstrap-sass</span> compatible with the asset pipeline, as shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-bootstrap_config" class="hyperref">Listing&nbsp;<span class="ref">5.4</span></a>.</p>
<div class="codelisting" id="_code-bootstrap_config" data-tralics-id="uid347" data-number="5.4"><div class="heading"><span class="number">Listing 5.4:</span> 

<span class="description">Adding a line for asset pipeline compatibility.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">config/application.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">'../boot'</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="k">module</span> <span class="nn">SampleApp</span>
  <span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="ss">Rails</span><span class="p">:</span><span class="ss">:Application</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">precompile</span> <span class="o">+=</span> <span class="sx">%w(*.png *.jpg *.jpeg *.gif)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><p>The first step in adding custom CSS to our application is to open a file to contain it:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> subl app/assets/stylesheets/custom.css.scss
</pre></div></div>
<p>Here both the directory name and filename are important.<span class="intersentencespace"></span> The directory</p>
<div class="code"><div class="highlight"><pre><span class="go">app/assets/stylesheets</span>
</pre></div></div>
<p>is part of the asset pipeline (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass_and_the_asset_pipeline" class="hyperref">Section&nbsp;<span class="ref">5.2</span></a>), and any stylesheets in this directory will automatically be included as part of the <code>application.css</code> file included in the site layout.<span class="intersentencespace"></span> Furthermore, the filename <code>custom.css.scss</code> includes the <code>.css</code> extension, which indicates a CSS file, and the <code>.scss</code> extension, which indicates a “Sassy CSS” file and arranges for the asset pipeline to process the file using Sass.<span class="intersentencespace"></span> (We won’t be using Sass until <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass" class="hyperref">Section&nbsp;<span class="ref">5.2.2</span></a>, but it’s needed now for the <span class="tt">bootstrap-sass</span> gem to work its magic.)</p>
<p>Inside the file for custom CSS, we can use the <code>@import</code> function to include Bootstrap, as shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-bootstrap_css" class="hyperref">Listing&nbsp;<span class="ref">5.5</span></a>.</p>
<div class="codelisting" id="_code-bootstrap_css" data-tralics-id="uid348" data-number="5.5"><div class="heading"><span class="number">Listing 5.5:</span> 

<span class="description">Adding Bootstrap CSS. <span class="break"></span> <span class="filepath">app/assets/stylesheets/custom.css.scss</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">"bootstrap"</span><span class="p">;</span>
</pre></div></div></div><p>This one line includes the entire Bootstrap CSS framework, with the result shown in in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-sample_app_only_bootstrap" class="hyperref">Figure&nbsp;<span class="ref">5.3</span></a>.<span class="intersentencespace"></span> (You may have to use <span class="tt">Ctrl-C</span> restart the local web server.<span class="intersentencespace"></span> It’s also worth noting that the screenshots use Bootstrap&nbsp;2.0, whereas the tutorial currently uses Bootstrap&nbsp;2.3, so there may be minor differences in appearance.<span class="intersentencespace"></span> These are not cause for concern.)<span class="intersentencespace"></span> The placement of the text isn’t good and the logo doesn’t have any style, but the colors and signup button look promising.</p>
<div class="center figure" id="_fig-sample_app_only_bootstrap" data-tralics-id="uid349" data-number="5.3">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/sample_app_only_bootstrap_4_0.png" alt="images/figures/sample_app_only_bootstrap_4_0"></div><div class="caption"><span class="header">Figure 5.3: </span><span class="description">The sample application with Bootstrap CSS.
</span></div></div>
<p>Next we’ll add some CSS that will be used site-wide for styling the layout and each individual page, as shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-universal_css" class="hyperref">Listing&nbsp;<span class="ref">5.6</span></a>.<span class="intersentencespace"></span> There are quite a few rules in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-universal_css" class="hyperref">Listing&nbsp;<span class="ref">5.6</span></a>; to get a sense of what a CSS rule does, it’s often helpful to comment it out using CSS comments, i.e., by putting it inside <code>/* … */</code>, and seeing what changes.<span class="intersentencespace"></span> The result of the CSS in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-universal_css" class="hyperref">Listing&nbsp;<span class="ref">5.6</span></a> is shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-sample_app_universal" class="hyperref">Figure&nbsp;<span class="ref">5.4</span></a>.</p>
<div class="codelisting" id="_code-universal_css" data-tralics-id="uid350" data-number="5.6"><div class="heading"><span class="number">Listing 5.6:</span> 

<span class="description">Adding CSS for some universal styling applying to all pages.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/assets/stylesheets/custom.css.scss</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">"bootstrap"</span><span class="p">;</span>

<span class="cm">/* universal */</span>

<span class="nt">html</span> <span class="p">{</span>
  <span class="na">overflow-y</span><span class="o">:</span> <span class="no">scroll</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span> <span class="p">{</span>
  <span class="na">overflow</span><span class="o">:</span> <span class="no">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">textarea</span> <span class="p">{</span>
  <span class="na">resize</span><span class="o">:</span> <span class="n">vertical</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="nt">h1</span> <span class="p">{</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div></div><div class="center figure" id="_fig-sample_app_universal" data-tralics-id="uid351" data-number="5.4">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/sample_app_universal_4_0.png" alt="images/figures/sample_app_universal_4_0"></div><div class="caption"><span class="header">Figure 5.4: </span><span class="description">Adding some spacing and other universal styling.
</span></div></div>
<p>Note that the CSS in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-universal_css" class="hyperref">Listing&nbsp;<span class="ref">5.6</span></a> has a consistent form.<span class="intersentencespace"></span> In general, CSS rules refer either to a class, an id, an HTML tag, or some combination thereof, followed by a list of styling commands.<span class="intersentencespace"></span> For example,</p>
<div class="code"><div class="highlight"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
<p>puts 60&nbsp;pixels of padding at the top of the page.<span class="intersentencespace"></span> Because of the <code>navbar-fixed-top</code> class in the <code>header</code> tag, Bootstrap fixes the navigation bar to the top of the page, so the padding serves to separate the main text from the navigation.<span class="intersentencespace"></span> (Because the default navbar color changed between Bootstrap 2.0 and 2.1, we need the <code>navbar-inverse</code> class to make it dark instead of light.)<span class="intersentencespace"></span> Meanwhile, the CSS in the rule</p>
<div class="code"><div class="highlight"><pre><span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
<p>associates the <code>center</code> class with the <code>text-align: center</code> property.<span class="intersentencespace"></span> In other words, the dot <code>.</code> in <code>.center</code> indicates that the rule styles a class.<span class="intersentencespace"></span> (As we’ll see in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-logo_css" class="hyperref">Listing&nbsp;<span class="ref">5.8</span></a>, the pound sign <code>#</code> identifies a rule to style a CSS <em>id</em>.)<span class="intersentencespace"></span> This means that elements inside any tag (such as a <code>div</code>) with class <code>center</code> will be centered on the page.<span class="intersentencespace"></span> (We saw an example of this class in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-signup_button" class="hyperref">Listing&nbsp;<span class="ref">5.2</span></a>.)</p>
<p>Although Bootstrap comes with CSS rules for nice typography, we’ll also add some custom rules for the appearance of the text on our site, as shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-typography_css" class="hyperref">Listing&nbsp;<span class="ref">5.7</span></a>.<span class="intersentencespace"></span> (Not all of these rules apply to the Home page, but each rule here will be used at some point in the sample application.)<span class="intersentencespace"></span> The result of <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-typography_css" class="hyperref">Listing&nbsp;<span class="ref">5.7</span></a> is shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-sample_app_typography" class="hyperref">Figure&nbsp;<span class="ref">5.5</span></a>.</p>
<div class="codelisting" id="_code-typography_css" data-tralics-id="uid352" data-number="5.7"><div class="heading"><span class="number">Listing 5.7:</span> 

<span class="description">Adding CSS for nice typography.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/assets/stylesheets/custom.css.scss</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">"bootstrap"</span><span class="p">;</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>

<span class="o">/*</span> <span class="nt">typography</span> <span class="o">*/</span>

<span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span> <span class="p">{</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">3</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-2</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.2</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">normal</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">p</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div></div><div class="center figure" id="_fig-sample_app_typography" data-tralics-id="uid353" data-number="5.5">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/sample_app_typography_4_0.png" alt="images/figures/sample_app_typography_4_0"></div><div class="caption"><span class="header">Figure 5.5: </span><span class="description">Adding some typographic styling.
</span></div></div>
<p>Finally, we’ll add some rules to style the site’s logo, which simply consists of the text “sample app”.<span class="intersentencespace"></span> The CSS in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-logo_css" class="hyperref">Listing&nbsp;<span class="ref">5.8</span></a> converts the text to uppercase and modifies its size, color, and placement.<span class="intersentencespace"></span> (We’ve used a CSS&nbsp;id because we expect the site logo to appear on the page only once, but you could use a class instead.)</p>
<div class="codelisting" id="_code-logo_css" data-tralics-id="uid354" data-number="5.8"><div class="heading"><span class="number">Listing 5.8:</span> 

<span class="description">Adding CSS for the site logo.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/assets/stylesheets/custom.css.scss</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">"bootstrap"</span><span class="p">;</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>

<span class="o">/*</span> <span class="nt">header</span> <span class="o">*/</span>

<span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nn">#logo</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div></div><p>Here <code>color: #fff</code> changes the color of the logo to white.<span class="intersentencespace"></span> HTML colors can be coded with three pairs of base-16 (hexadecimal) numbers, one each for the primary colors red, green, and blue (in that order).<span class="intersentencespace"></span> The code <code>#ffffff</code> maxes out all three colors, yielding pure white, and <code>#fff</code> is a shorthand for the full <code>#ffffff</code>.<span class="intersentencespace"></span> The CSS standard also defines a large number of synonyms for common <a href="http://www.w3schools.com/html/html_colornames.asp">HTML colors</a>, including <code>white</code> for <code>#fff</code>.<span class="intersentencespace"></span> The result of the CSS in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-logo_css" class="hyperref">Listing&nbsp;<span class="ref">5.8</span></a> is shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-sample_app_logo" class="hyperref">Figure&nbsp;<span class="ref">5.6</span></a>.</p>
<div class="center figure" id="_fig-sample_app_logo" data-tralics-id="uid355" data-number="5.6">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/sample_app_logo_4_0.png" alt="images/figures/sample_app_logo_4_0"></div><div class="caption"><span class="header">Figure 5.6: </span><span class="description">The sample app with nicely styled logo.
</span></div></div>
</div>
<div id="_sec-partials" data-tralics-id="uid356" class="subsection" data-number="5.1.3"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-partials" class="heading hyperref"><span class="number">5.1.3 </span>Partials</a></h3>
<p>Although the layout in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_new_structure" class="hyperref">Listing&nbsp;<span class="ref">5.1</span></a> serves its purpose, it’s getting a little cluttered.<span class="intersentencespace"></span> The HTML shim takes up three lines and uses weird IE-specific syntax, so it would be nice to tuck it away somewhere on its own.<span class="intersentencespace"></span> In addition, the header HTML forms a logical unit, so it should all be packaged up in one place.<span class="intersentencespace"></span> The way to achieve this in Rails is to use a facility called <em>partials</em>.<span class="intersentencespace"></span> Let’s first take a look at what the layout looks like after the partials are defined (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_with_partials" class="hyperref">Listing&nbsp;<span class="ref">5.9</span></a>).</p>
<div class="codelisting" id="_code-layout_with_partials" data-tralics-id="uid357" data-number="5.9"><div class="heading"><span class="number">Listing 5.9:</span> 

<span class="description">The site layout with partials for the stylesheets and header.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/application.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">full_title</span><span class="p">(</span><span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">))</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="ss">media</span><span class="p">:</span> <span class="s2">"all"</span><span class="p">,</span>
                                           <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/shim'</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/header'</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div></div></div><p>In <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_with_partials" class="hyperref">Listing&nbsp;<span class="ref">5.9</span></a>, we’ve replaced the HTML shim stylesheet lines with a single call to a Rails helper called <code>render</code>:</p>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/shim'</span> <span class="cp">%&gt;</span>
</pre></div></div>
<p>The effect of this line is to look for a file called <code>app/views/layouts/_shim.html.erb</code>, evaluate its contents, and insert the results into the view.<sup id="_cha-5_footnote-ref-6" class="footnote intersentence"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-6">6</a></sup><span class="intersentencespace"></span> (Recall that <span class="inline_verbatim">&lt;%= ... %&gt;</span> is the embedded Ruby syntax needed to evaluate a Ruby expression and then insert the results into the template.)<span class="intersentencespace"></span> Note the leading underscore on the filename <code>_shim.html.erb</code>; this underscore is the universal convention for naming partials, and among other things makes it possible to identify all the partials in a directory at a glance.</p>
<p>Of course, to get the partial to work, we have to fill it with some content; in the case of the shim partial, this is just the three lines of shim code from <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_new_structure" class="hyperref">Listing&nbsp;<span class="ref">5.1</span></a>; the result appears in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-stylesheets_partial" class="hyperref">Listing&nbsp;<span class="ref">5.10</span></a>.</p>
<div class="codelisting" id="_code-stylesheets_partial" data-tralics-id="uid359" data-number="5.10"><div class="heading"><span class="number">Listing 5.10:</span> 

<span class="description">A partial for the HTML shim.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/_shim.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="c">&lt;!--[if lt IE 9]&gt;</span>
<span class="c">&lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;</span>
<span class="c">&lt;![endif]--&gt;</span>
</pre></div></div></div><p>Similarly, we can move the header material into the partial shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-header_partial" class="hyperref">Listing&nbsp;<span class="ref">5.11</span></a> and insert it into the layout with another call to <code>render</code>.</p>
<div class="codelisting" id="_code-header_partial" data-tralics-id="uid360" data-number="5.11"><div class="heading"><span class="number">Listing 5.11:</span> 

<span class="description">A partial for the site header.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/_header.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"navbar navbar-fixed-top navbar-inverse"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-inner"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"sample app"</span><span class="p">,</span> <span class="s1">'#'</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">"logo"</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;nav&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav pull-right"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Home"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Help"</span><span class="p">,</span>    <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/nav&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div></div></div><p>Now that we know how to make partials, let’s add a site footer to go along with the header.<span class="intersentencespace"></span> By now you can probably guess that we’ll call it <code>_footer.html.erb</code> and put it in the layouts directory (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-footer_partial" class="hyperref">Listing&nbsp;<span class="ref">5.12</span></a>).<sup id="_cha-5_footnote-ref-7" class="footnote"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-7">7</a></sup></p>
<div class="codelisting" id="_code-footer_partial" data-tralics-id="uid362" data-number="5.12"><div class="heading"><span class="number">Listing 5.12:</span> 

<span class="description">A partial for the site footer.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/_footer.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://railstutorial.org/"</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span>   <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Contact"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"http://news.railstutorial.org/"</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div></div></div><p>As with the header, in the footer we’ve used <code>link_to</code> for the internal links to the About and Contact pages and stubbed out the URLs with <code>’#’</code> for now.<span class="intersentencespace"></span> (As with <code>header</code>, the <code>footer</code> tag is new in HTML5.)</p>
<p>We can render the footer partial in the layout by following the same pattern as the stylesheets and header partials (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_with_footer" class="hyperref">Listing&nbsp;<span class="ref">5.13</span></a>).</p>
<div class="codelisting" id="_code-layout_with_footer" data-tralics-id="uid363" data-number="5.13"><div class="heading"><span class="number">Listing 5.13:</span> 

<span class="description">The site layout with a footer partial.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/application.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">full_title</span><span class="p">(</span><span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">))</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="ss">media</span><span class="p">:</span> <span class="s2">"all"</span><span class="p">,</span>
                                           <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/shim'</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/header'</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/footer'</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div></div></div><p>Of course, the footer will be ugly without some styling (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-footer_css" class="hyperref">Listing&nbsp;<span class="ref">5.14</span></a>).<span class="intersentencespace"></span> The results appear in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-site_with_footer" class="hyperref">Figure&nbsp;<span class="ref">5.7</span></a>.</p>
<div class="codelisting" id="_code-footer_css" data-tralics-id="uid364" data-number="5.14"><div class="heading"><span class="number">Listing 5.14:</span> 

<span class="description">Adding the CSS for the site footer.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/assets/stylesheets/custom.css.scss</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>

<span class="o">/*</span> <span class="nt">footer</span> <span class="o">*/</span>

<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">margin-top</span><span class="o">:</span> <span class="mi">45</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#eaeaea</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">a</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#555</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#222</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">small</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">ul</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">right</span><span class="p">;</span>
  <span class="na">list-style</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">footer</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-left</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div></div><div class="center figure" id="_fig-site_with_footer" data-tralics-id="uid365" data-number="5.7">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/site_with_footer_bootstrap_4_0.png" alt="images/figures/site_with_footer_bootstrap_4_0"></div><div class="caption"><span class="header">Figure 5.7: </span><span class="description">The Home page (<a href="http://localhost:3000/static_pages/home">/static_pages/home</a>) with an added footer.
</span></div></div>
</div></div><div id="_sec-sass_and_the_asset_pipeline" data-tralics-id="cid28" class="section" data-number="5.2"><h2><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass_and_the_asset_pipeline" class="heading hyperref"><span class="number">5.2 </span>Sass and the asset pipeline</a></h2>
<p>One of the most notable additions in recent versions of Rails is the asset pipeline, which significantly improves the production and management of static assets such as CSS, JavaScript, and images.<span class="intersentencespace"></span> This section gives a high-level overview of the asset pipeline and then shows how to use a remarkable tool for making CSS called <em>Sass</em>, now included by default as part of the asset pipeline.</p>
<div id="_sec-the_asset_pipeline" data-tralics-id="uid366" class="subsection" data-number="5.2.1"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-the_asset_pipeline" class="heading hyperref"><span class="number">5.2.1 </span>The asset pipeline</a></h3>
<p>The asset pipeline involves lots of changes under Rails’ hood, but from the perspective of a typical Rails developer there are three principal features to understand: asset directories, manifest files, and preprocessor engines.<sup id="_cha-5_footnote-ref-8" class="footnote intersentence"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-8">8</a></sup><span class="intersentencespace"></span> Let’s consider each in turn.</p>
<div id="_uid368" data-tralics-id="uid368" class="subsubsection" data-number="5.2.1.1"><h4><a href="http://www.railstutorial.org/book/filling_in_the_layout#uid368" class="heading">Asset directories</a></h4>
<p>In versions of Rails before 3.0 (including 3.0 itself), static assets lived in the <code>public/</code> directory, as follows:</p>
<ul><li><code>public/stylesheets</code>
</li>
<li><code>public/javascripts</code>
</li>
<li><code>public/images</code>
</li></ul><p>Files in these directories are (even post-3.0) automatically served up via requests to http://example.com/stylesheets, etc.</p>
<p>Starting in Rails 3.1, and continuing in Rails&nbsp;4, there are <em>three</em> canonical directories for static assets, each with its own purpose:</p>
<ul><li><code>app/assets</code>: assets specific to the present application
</li>
<li><code>lib/assets</code>: assets for libraries written by your dev team
</li>
<li><code>vendor/assets</code>: assets from third-party vendors
</li></ul><p>As you might guess, each of these directories has a subdirectory for each asset class, e.g.,</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> ls app/assets/
<span class="go">images      javascripts stylesheets</span>
</pre></div></div>
<p>At this point, we’re in a position to understand the motivation behind the location of the <code>custom.css.scss</code> file in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-custom_css" class="hyperref">Section&nbsp;<span class="ref">5.1.2</span></a>: <code>custom.css.scss</code> is specific to the sample application, so it goes in <code>app/assets/stylesheets</code>.</p>
</div>
<div id="_uid375" data-tralics-id="uid375" class="subsubsection" data-number="5.2.1.2"><h4><a href="http://www.railstutorial.org/book/filling_in_the_layout#uid375" class="heading">Manifest files</a></h4>
<p>Once you’ve placed your assets in their logical locations, you can use <em>manifest files</em> to tell Rails (via the <a href="https://github.com/sstephenson/sprockets">Sprockets</a> gem) how to combine them to form single files.<span class="intersentencespace"></span> (This applies to CSS and JavaScript but not to images.)<span class="intersentencespace"></span> As an example, let’s take a look at the default manifest file for app stylesheets (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-app_css_manifest" class="hyperref">Listing&nbsp;<span class="ref">5.15</span></a>).</p>
<div class="codelisting" id="_code-app_css_manifest" data-tralics-id="uid376" data-number="5.15"><div class="heading"><span class="number">Listing 5.15:</span> 

<span class="description">The manifest file for app-specific CSS. <span class="break"></span> <span class="filepath">app/assets/stylesheets/application.css</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This is a manifest file that'll automatically include all the stylesheets</span>
<span class="cm"> * available in this directory and any sub-directories. You're free to add</span>
<span class="cm"> * application-wide styles to this file and they'll appear at the top of the</span>
<span class="cm"> * compiled file, but it's generally better to create a new file per style</span>
<span class="cm"> * scope.</span>
<span class="cm"> *= require_self</span>
<span class="cm"> *= require_tree .</span>
<span class="cm">*/</span>
</pre></div></div></div><p>The key lines here are actually CSS comments, but they are used by Sprockets to include the proper files:</p>
<div class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> .</span>
<span class="cm"> .</span>
<span class="cm"> .</span>
<span class="cm"> *= require_self</span>
<span class="cm"> *= require_tree .</span>
<span class="cm">*/</span>
</pre></div></div>
<p>Here</p>
<div class="code"><div class="highlight"><pre><span class="go">*= require_tree .</span>
</pre></div></div>
<p>ensures that all CSS files in the <code>app/assets/stylesheets</code> directory (including the tree subdirectories) are included into the application CSS. The line</p>
<div class="code"><div class="highlight"><pre><span class="go">*= require_self</span>
</pre></div></div>
<p>specifies where in the loading sequence the CSS in <code>application.css</code> itself gets included.</p>
<p>Rails comes with sensible default manifest files, and in the <em>Rails Tutorial</em> we won’t need to make any changes, but the <a href="http://guides.rubyonrails.org/asset_pipeline.html">Rails Guides entry on the asset pipeline</a> has more detail if you need it.</p>
</div>
<div id="_uid377" data-tralics-id="uid377" class="subsubsection" data-number="5.2.1.3"><h4><a href="http://www.railstutorial.org/book/filling_in_the_layout#uid377" class="heading">Preprocessor engines</a></h4>
<p>After you’ve assembled your assets, Rails prepares them for the site template by running them through several preprocessing engines and using the manifest files to combine them for delivery to the browser.<span class="intersentencespace"></span> We tell Rails which processor to use using filename extensions; the three most common cases are <code>.scss</code> for Sass, <code>.coffee</code> for CoffeeScript, and <code>.erb</code> for embedded Ruby (ERb).<span class="intersentencespace"></span> We first covered ERb in <a href="http://www.railstutorial.org/book/static_pages#sec-embedded_ruby" class="hyperref">Section&nbsp;<span class="ref">3.3.3</span></a>, and cover Sass in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass" class="hyperref">Section&nbsp;<span class="ref">5.2.2</span></a>.<span class="intersentencespace"></span> We won’t be needing CoffeeScript in this tutorial, but it’s an elegant little language that compiles to JavaScript.<span class="intersentencespace"></span> (The <a href="http://railscasts.com/episodes/267-coffeescript-basics">RailsCast on CoffeeScript basics</a> is a good place to start.)</p>
<p>The preprocessor engines can be chained, so that</p>
<p><code>foobar.js.coffee</code></p>
<p>gets run through the CoffeeScript processor, and</p>
<p><code>foobar.js.erb.coffee</code></p>
<p>gets run through both CoffeeScript and ERb (with the code running from right to left, i.e., CoffeeScript first).</p>
</div>
<div id="_uid378" data-tralics-id="uid378" class="subsubsection" data-number="5.2.1.4"><h4><a href="http://www.railstutorial.org/book/filling_in_the_layout#uid378" class="heading">Efficiency in production</a></h4>
<p>One of the best things about the asset pipeline is that it automatically results in assets that are optimized to be efficient in a production application.<span class="intersentencespace"></span> Traditional methods for organizing CSS and JavaScript involve splitting functionality into separate files and using nice formatting (with lots of indentation).<span class="intersentencespace"></span> While convenient for the programmer, this is inefficient in production; including multiple full-sized files can significantly slow page-load times (one of the most important factors affecting the quality of the user experience).<span class="intersentencespace"></span> With the asset pipeline, in production all the application stylesheets get rolled into one CSS file (<code>application.css</code>), all the application JavaScript code gets rolled into one JavaScript file (<code>javascripts.js</code>), and all such files (including those in <code>lib/assets</code> and <code>vendor/assets</code>) are <em>minified</em> to remove the unnecessary whitespace that bloats file size.<span class="intersentencespace"></span> As a result, we get the best of both worlds: multiple nicely formatted files for programmer convenience, with single optimized files in production.</p>
</div></div>
<div id="_sec-sass" data-tralics-id="uid379" class="subsection" data-number="5.2.2"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-sass" class="heading hyperref"><span class="number">5.2.2 </span>Syntactically awesome stylesheets</a></h3>
<p><em>Sass</em> is a language for writing stylesheets that improves on CSS in many ways.<span class="intersentencespace"></span> In this section, we cover two of the most important improvements, <em>nesting</em> and <em>variables</em>.<span class="intersentencespace"></span> (A third technique, <em>mixins</em>, is introduced in <a href="http://www.railstutorial.org/book/sign_up#sec-rails_environments" class="hyperref">Section&nbsp;<span class="ref">7.1.1</span></a>.)</p>
<p>As noted briefly in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-custom_css" class="hyperref">Section&nbsp;<span class="ref">5.1.2</span></a>, Sass supports a format called SCSS (indicated with a <code>.scss</code> filename extension), which is a strict superset of CSS itself; that is, SCSS only <em>adds</em> features to CSS, rather than defining an entirely new syntax.<sup id="_cha-5_footnote-ref-9" class="footnote intersentence"><a href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-9">9</a></sup><span class="intersentencespace"></span> This means that every valid CSS file is also a valid SCSS file, which is convenient for projects with existing style rules.<span class="intersentencespace"></span> In our case, we used SCSS from the start in order to take advantage of Bootstrap.<span class="intersentencespace"></span> Since the Rails asset pipeline automatically uses Sass to process files with the <code>.scss</code> extension, the <code>custom.css.scss</code> file will be run through the Sass preprocessor before being packaged up for delivery to the browser.</p>
<div id="_uid381" data-tralics-id="uid381" class="subsubsection" data-number="5.2.2.1"><h4><a href="http://www.railstutorial.org/book/filling_in_the_layout#uid381" class="heading">Nesting</a></h4>
<p>A common pattern in stylesheets is having rules that apply to nested elements.<span class="intersentencespace"></span> For example, in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-universal_css" class="hyperref">Listing&nbsp;<span class="ref">5.6</span></a> we have rules both for <code>.center</code> and for <code>.center h1</code>:</p>
<div class="code"><div class="highlight"><pre><span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="nt">h1</span> <span class="p">{</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
<p>We can replace this in Sass with</p>
<div class="code"><div class="highlight"><pre><span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>
<p>Here the nested <code>h1</code> rule automatically inherits the <code>.center</code> context.</p>
<p>There’s a second candidate for nesting that requires a slightly different syntax.<span class="intersentencespace"></span> In <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-logo_css" class="hyperref">Listing&nbsp;<span class="ref">5.8</span></a>, we have the code</p>
<div class="code"><div class="highlight"><pre><span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nn">#logo</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
<p>Here the logo id <code>#logo</code> appears twice, once by itself and once with the <code>hover</code> attribute (which controls its appearance when the mouse pointer hovers over the element in question).<span class="intersentencespace"></span> In order to nest the second rule, we need to reference the parent element <code>#logo</code>; in SCSS, this is accomplished with the ampersand character&nbsp;<code>&amp;</code> as follows:</p>
<div class="code"><div class="highlight"><pre><span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
    <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>
<p>Sass changes <code>&amp;:hover</code> into <code>#logo:hover</code> as part of converting from SCSS to CSS.</p>
<p>Both of these nesting techniques apply to the footer CSS in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-footer_css" class="hyperref">Listing&nbsp;<span class="ref">5.14</span></a>, which can be transformed into the following:</p>
<div class="code"><div class="highlight"><pre><span class="nt">footer</span> <span class="p">{</span>
  <span class="na">margin-top</span><span class="o">:</span> <span class="mi">45</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#eaeaea</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
  <span class="nt">a</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="mh">#555</span><span class="p">;</span>
    <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
      <span class="na">color</span><span class="o">:</span> <span class="mh">#222</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nt">small</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">ul</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">right</span><span class="p">;</span>
    <span class="na">list-style</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
    <span class="nt">li</span> <span class="p">{</span>
      <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
      <span class="na">margin-left</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div>
<p>Converting <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-footer_css" class="hyperref">Listing&nbsp;<span class="ref">5.14</span></a> by hand is a good exercise, and you should verify that the CSS still works properly after the conversion.</p>
</div>
<div id="_uid382" data-tralics-id="uid382" class="subsubsection" data-number="5.2.2.2"><h4><a href="http://www.railstutorial.org/book/filling_in_the_layout#uid382" class="heading">Variables</a></h4>
<p>Sass allows us to define <em>variables</em> to eliminate duplication and write more expressive code.<span class="intersentencespace"></span> For example, looking at <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-typography_css" class="hyperref">Listing&nbsp;<span class="ref">5.7</span></a> and <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-footer_css" class="hyperref">Listing&nbsp;<span class="ref">5.14</span></a>, we see that there are repeated references to the same color:</p>
<div class="code"><div class="highlight"><pre><span class="nt">h2</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
<p>In this case, <code>#999</code> is a light gray, and we can give it a name by defining a variable as follows:</p>
<div class="code"><div class="highlight"><pre><span class="nv">$lightGray</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
</pre></div></div>
<p>This allows us to rewrite our SCSS like this:</p>
<div class="code"><div class="highlight"><pre><span class="nv">$lightGray</span><span class="o">:</span> <span class="mh">#999</span><span class="p">;</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">h2</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$lightGray</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$lightGray</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
<p>Because variable names such as <code>$lightGray</code> are more descriptive than <code>#999</code>, it’s often useful to define variables even for values that aren’t repeated.<span class="intersentencespace"></span> Indeed, the Bootstrap framework defines a large number of variables for colors, available online on the <a href="http://bootstrapdocs.com/v2.0.4/docs/less.html">Bootstrap page of LESS variables</a>.<span class="intersentencespace"></span> That page defines variables using LESS, not Sass, but the <span class="tt">bootstrap-sass</span> gem provides the Sass equivalents.<span class="intersentencespace"></span> It is not difficult to guess the correspondence; where LESS uses an “at” sign&nbsp;<code>@</code>, Sass uses a dollar sign&nbsp;<code>$</code>.<span class="intersentencespace"></span> Looking the Bootstrap variable page, we see that there is a variable for light gray:</p>
<div class="code"><div class="highlight"><pre> <span class="k">@grayLight</span><span class="nd">:</span> <span class="nn">#999</span><span class="o">;</span>
</pre></div></div>
<p>This means that, via the <span class="tt">bootstrap-sass</span> gem, there should be a corresponding SCSS variable <code>$grayLight</code>.<span class="intersentencespace"></span> We can use this to replace our custom variable, <code>$lightGray</code>, which gives</p>
<div class="code"><div class="highlight"><pre><span class="nt">h2</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nc">.</span>
<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">.</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div>
<p>Applying the Sass nesting and variable definition features to the full SCSS file gives the file in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-refactored_scss" class="hyperref">Listing&nbsp;<span class="ref">5.16</span></a>.<span class="intersentencespace"></span> This uses both Sass variables (as inferred from the Bootstrap LESS variable page) and built-in named colors (i.e., <code>white</code> for <code>#fff</code>).<span class="intersentencespace"></span> Note in particular the dramatic improvement in the rules for the <code>footer</code> tag.</p>
<div class="codelisting" id="_code-refactored_scss" data-tralics-id="uid383" data-number="5.16"><div class="heading"><span class="number">Listing 5.16:</span> 

<span class="description">The initial SCSS file converted to use nesting and variables.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/assets/stylesheets/custom.css.scss</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">@import</span> <span class="s2">"bootstrap"</span><span class="p">;</span>

<span class="cm">/* mixins, variables, etc. */</span>

<span class="nv">$grayMediumLight</span><span class="o">:</span> <span class="mh">#eaeaea</span><span class="p">;</span>

<span class="cm">/* universal */</span>

<span class="nt">html</span> <span class="p">{</span>
  <span class="na">overflow-y</span><span class="o">:</span> <span class="no">scroll</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">body</span> <span class="p">{</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">section</span> <span class="p">{</span>
  <span class="na">overflow</span><span class="o">:</span> <span class="no">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">textarea</span> <span class="p">{</span>
  <span class="na">resize</span><span class="o">:</span> <span class="n">vertical</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.center</span> <span class="p">{</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="nt">h1</span> <span class="p">{</span>
    <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* typography */</span>

<span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span> <span class="p">{</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">3</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-2</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h2</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.2</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin-bottom</span><span class="o">:</span> <span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">text-align</span><span class="o">:</span> <span class="no">center</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">normal</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">p</span> <span class="p">{</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.1</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/* header */</span>

<span class="nn">#logo</span> <span class="p">{</span>
  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="na">margin-right</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-size</span><span class="o">:</span> <span class="mi">1</span><span class="mf">.7</span><span class="kt">em</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
  <span class="na">text-transform</span><span class="o">:</span> <span class="no">uppercase</span><span class="p">;</span>
  <span class="na">letter-spacing</span><span class="o">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">9</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="p">;</span>
  <span class="na">line-height</span><span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="nb">white</span><span class="p">;</span>
    <span class="na">text-decoration</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* footer */</span>

<span class="nt">footer</span> <span class="p">{</span>
  <span class="na">margin-top</span><span class="o">:</span> <span class="mi">45</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">padding-top</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="nv">$grayMediumLight</span><span class="p">;</span>
  <span class="na">color</span><span class="o">:</span> <span class="nv">$grayLight</span><span class="p">;</span>
  <span class="nt">a</span> <span class="p">{</span>
    <span class="na">color</span><span class="o">:</span> <span class="nv">$gray</span><span class="p">;</span>
    <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
      <span class="na">color</span><span class="o">:</span> <span class="nv">$grayDarker</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nt">small</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nt">ul</span> <span class="p">{</span>
    <span class="na">float</span><span class="o">:</span> <span class="no">right</span><span class="p">;</span>
    <span class="na">list-style</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
    <span class="nt">li</span> <span class="p">{</span>
      <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
      <span class="na">margin-left</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div><p>Sass gives us even more ways to simplify our stylesheets, but the code in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-refactored_scss" class="hyperref">Listing&nbsp;<span class="ref">5.16</span></a> uses the most important features and gives us a great start.<span class="intersentencespace"></span> See the <a href="http://sass-lang.com/">Sass website</a> for more details.</p>
</div></div></div><div id="_sec-layout_links" data-tralics-id="cid29" class="section" data-number="5.3"><h2><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_links" class="heading hyperref"><span class="number">5.3 </span>Layout links</a></h2>
<p>Now that we’ve finished a site layout with decent styling, it’s time to start filling in the links we’ve stubbed out with <code>’#’</code>.<span class="intersentencespace"></span> Of course, we could hard-code links like</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/static_pages/about"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;</span>
</pre></div></div>
<p>but that isn’t the Rails Way.<span class="intersentencespace"></span> For one, it would be nice if the URL for the about page were /about rather than /static_pages/about.<span class="intersentencespace"></span> Moreover, Rails conventionally uses <em>named routes</em>, which involves code like</p>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div></div>
<p>This way the code has a more transparent meaning, and it’s also more flexible since we can change the definition of <code>about_path</code> and have the URL change everywhere <code>about_path</code> is used.</p>
<p>The full list of our planned links appears in <a href="http://www.railstutorial.org/book/filling_in_the_layout#table-url_mapping" class="hyperref">Table&nbsp;<span class="ref">5.6</span></a>, along with their mapping to URLs and routes.<span class="intersentencespace"></span> We’ll implement all but the last one by the end of this chapter.<span class="intersentencespace"></span> (We’ll make the last one in <a href="http://www.railstutorial.org/book/sign_in_out#cha-sign_in_sign_out" class="hyperref">Chapter&nbsp;<span class="ref">8</span></a>.)</p>
<div class="table" id="_table-url_mapping" data-tralics-id="uid384" data-number="5.6"><table class="tabular"><tbody><tr class="bottom_border"><td class="align_left"><strong>Page</strong></td>
<td class="align_left"><strong>URL</strong></td>
<td class="align_right"><strong>Named route</strong></td>
</tr><tr><td class="align_left">Home</td>
<td class="align_left">/</td>
<td class="align_right"><code>root_path</code></td>
</tr><tr><td class="align_left">About</td>
<td class="align_left">/about</td>
<td class="align_right"><code>about_path</code></td>
</tr><tr><td class="align_left">Help</td>
<td class="align_left">/help</td>
<td class="align_right"><code>help_path</code></td>
</tr><tr><td class="align_left">Contact</td>
<td class="align_left">/contact</td>
<td class="align_right"><code>contact_path</code></td>
</tr><tr><td class="align_left">Sign up</td>
<td class="align_left">/signup</td>
<td class="align_right"><code>signup_path</code></td>
</tr><tr><td class="align_left">Sign in</td>
<td class="align_left">/signin</td>
<td class="align_right"><code>signin_path</code></td>
</tr></tbody></table><div class="caption"><span class="header">Table 5.6: </span><span class="description">Route and URL mapping for site links.
</span></div></div>
<p>Before moving on, let’s add a Contact page (left as an exercise in <a href="http://www.railstutorial.org/book/static_pages#cha-static_pages" class="hyperref">Chapter&nbsp;<span class="ref">3</span></a>).<span class="intersentencespace"></span> The test appears as in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_page_test" class="hyperref">Listing&nbsp;<span class="ref">5.17</span></a>, which simply follows the model last seen in <a href="http://www.railstutorial.org/book/static_pages#code-pages_controller_spec_title" class="hyperref">Listing&nbsp;<span class="ref">3.19</span></a>.</p>
<div class="codelisting" id="_code-contact_page_test" data-tralics-id="uid385" data-number="5.17"><div class="heading"><span class="number">Listing 5.17:</span> 

<span class="description">Tests for a Contact page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/requests/static_pages_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="s2">"Static pages"</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">describe</span> <span class="s2">"Contact page"</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">"should have the content 'Contact'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="s1">'/static_pages/contact'</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Contact'</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should have the title 'Contact'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="s1">'/static_pages/contact'</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App | Contact"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><p>To ensure that both of the tests in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_page_test" class="hyperref">Listing&nbsp;<span class="ref">5.17</span></a> fail, we need to comment out the “Contact” link in the footer, as shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-comment_out_footer" class="hyperref">Listing&nbsp;<span class="ref">5.18</span></a>.</p>
<div class="codelisting" id="_code-comment_out_footer" data-tralics-id="uid386" data-number="5.18"><div class="heading"><span class="number">Listing 5.18:</span> 

<span class="description">Commenting out the “Contact” link in the footer.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/_footer.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://railstutorial.org/"</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span>   <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%#</span><span class="c">= link_to "Contact", '#' </span><span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"http://news.railstutorial.org/"</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div></div></div><p>We see from <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-comment_out_footer" class="hyperref">Listing&nbsp;<span class="ref">5.18</span></a> how to comment out code in Embedded Ruby, which involves placing a Ruby comment character&nbsp;<code>#</code> immediately after the percent sign:</p>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%#</span><span class="c">= link_to "Contact", '#' </span><span class="cp">%&gt;</span>
</pre></div></div>
<p>At this point, the tests in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_page_test" class="hyperref">Listing&nbsp;<span class="ref">5.17</span></a> should fail:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div></div>
<p>The application code parallels the addition of the About page in <a href="http://www.railstutorial.org/book/static_pages#sec-adding_a_page" class="hyperref">Section&nbsp;<span class="ref">3.2.2</span></a>: first we update the routes (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_route" class="hyperref">Listing&nbsp;<span class="ref">5.19</span></a>), then we add a <code>contact</code> action to the StaticPages controller (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_action" class="hyperref">Listing&nbsp;<span class="ref">5.20</span></a>), and finally we create a Contact view (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_view" class="hyperref">Listing&nbsp;<span class="ref">5.21</span></a>).</p>
<div class="codelisting" id="_code-contact_route" data-tralics-id="uid387" data-number="5.19"><div class="heading"><span class="number">Listing 5.19:</span> 

<span class="description">Adding a route for the Contact page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">config/routes.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="ss">SampleApp</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"static_pages/home"</span>
  <span class="n">get</span> <span class="s2">"static_pages/help"</span>
  <span class="n">get</span> <span class="s2">"static_pages/about"</span>
  <span class="n">get</span> <span class="s2">"static_pages/contact"</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div></div></div><div class="codelisting" id="_code-contact_action" data-tralics-id="uid388" data-number="5.20"><div class="heading"><span class="number">Listing 5.20:</span> 

<span class="description">Adding an action for the Contact page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/controllers/static_pages_controller.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">StaticPagesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="k">def</span> <span class="nf">contact</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><div class="codelisting" id="_code-contact_view" data-tralics-id="uid389" data-number="5.21"><div class="heading"><span class="number">Listing 5.21:</span> 

<span class="description">The view for the Contact page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/static_pages/contact.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%</span> <span class="n">provide</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="s1">'Contact'</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;h1&gt;</span>Contact<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>
  Contact Ruby on Rails Tutorial about the sample app at the
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://railstutorial.org/contact"</span><span class="nt">&gt;</span>contact page<span class="nt">&lt;/a&gt;</span>.
<span class="nt">&lt;/p&gt;</span>
</pre></div></div></div><p>Now make sure that the tests pass:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div></div>
<p>At this point, having gone through the Red-Green cycle to verify that we’re testing for the right things, we should uncomment the “Contact” link in the footer (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-uncomment_footer" class="hyperref">Listing&nbsp;<span class="ref">5.22</span></a>).<span class="intersentencespace"></span> This isn’t ideal, as now our tests won’t catch a regression if we accidentally remove the <code>h1</code> tag from <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_view" class="hyperref">Listing&nbsp;<span class="ref">5.21</span></a>.<span class="intersentencespace"></span> Fixing this issue, which requires writing a test specifically for the content of the <code>h1</code>, is solved in an exercise (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_exercises" class="hyperref">Section&nbsp;<span class="ref">5.6</span></a>).</p>
<div class="codelisting" id="_code-uncomment_footer" data-tralics-id="uid390" data-number="5.22"><div class="heading"><span class="number">Listing 5.22:</span> 

<span class="description">Uncommenting the “Contact” link in the footer.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/_footer.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://railstutorial.org/"</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span>   <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Contact"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"http://news.railstutorial.org/"</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div></div></div>
<div id="_sec-route_tests" data-tralics-id="uid391" class="subsection" data-number="5.3.1"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-route_tests" class="heading hyperref"><span class="number">5.3.1 </span>Route tests</a></h3>
<p>With the work we’ve done writing integration tests for the static pages, writing tests for the routes is simple: we just replace each occurrence of a hard-coded address with the desired named route from <a href="http://www.railstutorial.org/book/filling_in_the_layout#table-url_mapping" class="hyperref">Table&nbsp;<span class="ref">5.6</span></a>.<span class="intersentencespace"></span> In other words, we change</p>
<div class="code"><div class="highlight"><pre><span class="n">visit</span> <span class="s1">'/static_pages/about'</span>
</pre></div></div>
<p>to</p>
<div class="code"><div class="highlight"><pre><span class="n">visit</span> <span class="n">about_path</span>
</pre></div></div>
<p>and so on for the other pages.<span class="intersentencespace"></span> The result appears in <a href="./Ruby on Rails Tutorial   Softcover.io_files/Ruby on Rails Tutorial   Softcover.io.html" class="hyperref">Listing&nbsp;<span class="ref">5.23</span></a>.</p>
<div class="codelisting" id="_code-route_tests" data-tralics-id="uid392" data-number="5.23"><div class="heading"><span class="number">Listing 5.23:</span> 

<span class="description">Tests for the named routes.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/requests/static_pages_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="s2">"Static pages"</span> <span class="k">do</span>

  <span class="n">describe</span> <span class="s2">"Home page"</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">"should have the content 'Sample App'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">root_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should have the base title"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">root_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App"</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should not have a custom page title"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">root_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">'| Home'</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"Help page"</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">"should have the content 'Help'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">help_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Help'</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should have the title 'Help'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">help_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App | Help"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"About page"</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">"should have the content 'About Us'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">about_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'About Us'</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should have the title 'About Us'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">about_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App | About Us"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"Contact page"</span> <span class="k">do</span>

    <span class="n">it</span> <span class="s2">"should have the content 'Contact'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">contact_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Contact'</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should have the title 'Contact'"</span> <span class="k">do</span>
      <span class="n">visit</span> <span class="n">contact_path</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App | Contact"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><p>As usual, you should check that the tests are now red:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div></div>
<p>By the way, if the code in <a href="./Ruby on Rails Tutorial   Softcover.io_files/Ruby on Rails Tutorial   Softcover.io.html" class="hyperref">Listing&nbsp;<span class="ref">5.23</span></a> strikes you as repetitive and verbose, you’re not alone.<span class="intersentencespace"></span> We’ll refactor this mess into a beautiful jewel in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-pretty_rspec" class="hyperref">Section&nbsp;<span class="ref">5.3.4</span></a>.</p>
</div>
<div id="_sec-rails_routes" data-tralics-id="uid393" class="subsection" data-number="5.3.2"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-rails_routes" class="heading hyperref"><span class="number">5.3.2 </span>Rails routes</a></h3>
<p>Now that we have tests for the URLs we want, it’s time to get them to work.<span class="intersentencespace"></span> As noted in <a href="http://www.railstutorial.org/book/static_pages#sec-static_pages" class="hyperref">Section&nbsp;<span class="ref">3.1</span></a>, the file Rails uses for URL mappings is <code>config/routes.rb</code>.<span class="intersentencespace"></span> If you take a look at the default routes file, you’ll see that it’s quite a mess, but it’s a useful mess—full of commented-out example route mappings.<span class="intersentencespace"></span> I suggest reading through it at some point, and I also suggest taking a look at the <a href="http://guides.rubyonrails.org/routing.html">Rails Guides article “Rails Routing from the outside in”</a> for a much more in-depth treatment of routes.</p>
<p>To define the named routes, we need to replace rules such as</p>
<div class="code"><div class="highlight"><pre><span class="n">get</span> <span class="s1">'static_pages/help'</span>
</pre></div></div>
<p>with</p>
<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">'/help'</span><span class="p">,</span> <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#help'</span><span class="p">,</span> <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
</pre></div></div>
<p>This arranges both for a valid page at <code>/help</code> (responding to <span class="tt">GET</span> requests) and a named route called <code>help_path</code> that returns the path to that page.<span class="intersentencespace"></span> (Actually, using <code>get</code> in place of <code>match</code> gives the same named routes, but using <code>match</code> is more conventional.)</p>
<p>Applying this pattern to the other static pages gives <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-static_page_routes" class="hyperref">Listing&nbsp;<span class="ref">5.24</span></a>.<span class="intersentencespace"></span> The only exception is the Home page, which we’ll take care of in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-root_route" class="hyperref">Listing&nbsp;<span class="ref">5.26</span></a>.</p>
<div class="codelisting" id="_code-static_page_routes" data-tralics-id="uid394" data-number="5.24"><div class="heading"><span class="number">Listing 5.24:</span> 

<span class="description">Routes for static pages.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">config/routes.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="ss">SampleApp</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">match</span> <span class="s1">'/help'</span><span class="p">,</span>    <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#help'</span><span class="p">,</span>    <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="n">match</span> <span class="s1">'/about'</span><span class="p">,</span>   <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#about'</span><span class="p">,</span>   <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="n">match</span> <span class="s1">'/contact'</span><span class="p">,</span> <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#contact'</span><span class="p">,</span> <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div></div></div><p>If you read the code in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-static_page_routes" class="hyperref">Listing&nbsp;<span class="ref">5.24</span></a> carefully, you can probably figure out what it does; for example, you can see that</p>
<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">'/about'</span><span class="p">,</span> <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#about'</span><span class="p">,</span>  <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
</pre></div></div>
<p>matches a <span class="tt">GET</span> request for <code>’/about’</code> and routes it to the <code>about</code> action in the StaticPages controller.<span class="intersentencespace"></span> Before, this was more explicit: we used
</p><div class="code"><div class="highlight"><pre><span class="n">get</span> <span class="s1">'static_pages/about'</span>
</pre></div></div>
<p>to get to the same place, but <code>/about</code> is more succinct.<span class="intersentencespace"></span> In addition, as mentioned above, the code <code>match ’/about’</code> also automatically creates <em>named routes</em> for use in the controllers and views:</p>
<div class="code"><div class="highlight"><pre><span class="n">about_path</span> <span class="o">-&gt;</span> <span class="s1">'/about'</span>
<span class="n">about_url</span>  <span class="o">-&gt;</span> <span class="s1">'http://localhost:3000/about'</span>
</pre></div></div>
<p>Note that <code>about_url</code> is the <em>full</em> URL http://localhost:3000/about (with <code>localhost:3000</code> being replaced with the domain name, such as <code>example.com</code>, for a fully deployed site).<span class="intersentencespace"></span> As discussed in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_links" class="hyperref">Section&nbsp;<span class="ref">5.3</span></a>, to get just /about, you use <code>about_path</code>.<span class="intersentencespace"></span> In the <em>Rails Tutorial</em>, we’ll follow the common convention of using the <code>path</code> form except when doing redirects, where we’ll use the <code>url</code> form.<span class="intersentencespace"></span> This is because after redirects the HTTP standard technically requires a full URL, although in most browsers it will work either way.</p>
<p>With these routes now defined, the tests for the Help, About, and Contact pages should pass:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div></div>
<p>This leaves the test for the Home page as the last one to fail.</p>
<p>To establish the route mapping for the Home page, we <em>could</em> use code like this:</p>
<div class="code"><div class="highlight"><pre><span class="n">match</span> <span class="s1">'/'</span><span class="p">,</span> <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#home'</span><span class="p">,</span> <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
</pre></div></div>
<p>This is unnecessary, though; Rails has special instructions for the root URL&nbsp;/ (“slash”) located lower down in the file (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-root_route_hint" class="hyperref">Listing&nbsp;<span class="ref">5.25</span></a>).</p>
<div class="codelisting" id="_code-root_route_hint" data-tralics-id="uid395" data-number="5.25"><div class="heading"><span class="number">Listing 5.25:</span> 

<span class="description">The commented-out hint for defining the root route.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">config/routes.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="ss">SampleApp</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="c1"># You can have the root of your site routed with "root"</span>
  <span class="c1"># root 'welcome#index'</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div></div></div><p>Using <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-root_route_hint" class="hyperref">Listing&nbsp;<span class="ref">5.25</span></a> as a model, we arrive at <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-root_route" class="hyperref">Listing&nbsp;<span class="ref">5.26</span></a> to route the root URL&nbsp;/ to the Home page.</p>
<div class="codelisting" id="_code-root_route" data-tralics-id="uid396" data-number="5.26"><div class="heading"><span class="number">Listing 5.26:</span> 

<span class="description">Adding a mapping for the root route.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">config/routes.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="ss">SampleApp</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">root</span>  <span class="s1">'static_pages#home'</span>
  <span class="n">match</span> <span class="s1">'/help'</span><span class="p">,</span>    <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#help'</span><span class="p">,</span>    <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="n">match</span> <span class="s1">'/about'</span><span class="p">,</span>   <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#about'</span><span class="p">,</span>   <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="n">match</span> <span class="s1">'/contact'</span><span class="p">,</span> <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#contact'</span><span class="p">,</span> <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div></div></div><p>This code maps the root URL&nbsp;/ to /static_pages/home, which means that <a href="http://localhost:3000/">http://localhost:3000/</a> is finally something other than the default Rails page from <a href="http://www.railstutorial.org/book/beginning#fig-riding_rails" class="hyperref">Figure&nbsp;<span class="ref">1.3</span></a>.<span class="intersentencespace"></span> It also gives us URL helpers as follows:</p>
<div class="code"><div class="highlight"><pre><span class="n">root_path</span> <span class="o">-&gt;</span> <span class="s1">'/'</span>
<span class="n">root_url</span>  <span class="o">-&gt;</span> <span class="s1">'http://localhost:3000/'</span>
</pre></div></div>
<p>With that, all of the routes for static pages are working, and the tests should pass:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div></div>
<p>Now we just have to fill in the links in the layout.</p>
</div>
<div id="_sec-named_routes" data-tralics-id="uid397" class="subsection" data-number="5.3.3"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-named_routes" class="heading hyperref"><span class="number">5.3.3 </span>Named routes</a></h3>
<p>Let’s put the named routes created in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-rails_routes" class="hyperref">Section&nbsp;<span class="ref">5.3.2</span></a> to work in our layout.<span class="intersentencespace"></span> This will entail filling in the second arguments of the <code>link_to</code> functions with the proper named routes.<span class="intersentencespace"></span> For example, we’ll convert</p>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span>
</pre></div></div>
<p>to</p>
<div class="code"><div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span>
</pre></div></div>
<p>and so on.</p>
<p>We’ll start in the header partial, <code>_header.html.erb</code> (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-header_partial_links" class="hyperref">Listing&nbsp;<span class="ref">5.27</span></a>), which has links to the Home and Help pages.<span class="intersentencespace"></span> While we’re at it, we’ll follow a common web convention and link the logo to the Home page as well.</p>
<div class="codelisting" id="_code-header_partial_links" data-tralics-id="uid398" data-number="5.27"><div class="heading"><span class="number">Listing 5.27:</span> 

<span class="description">Header partial with links.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/_header.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"navbar navbar-fixed-top navbar-inverse"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"navbar-inner"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"sample app"</span><span class="p">,</span> <span class="n">root_path</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s2">"logo"</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;nav&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav pull-right"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Home"</span><span class="p">,</span>    <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Help"</span><span class="p">,</span>    <span class="n">help_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
          <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign in"</span><span class="p">,</span> <span class="s1">'#'</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
      <span class="nt">&lt;/nav&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/header&gt;</span>
</pre></div></div></div><p>We won’t have a named route for the “Sign in” link until <a href="http://www.railstutorial.org/book/sign_in_out#cha-sign_in_sign_out" class="hyperref">Chapter&nbsp;<span class="ref">8</span></a>, so we’ve left it as <code>’#’</code> for now.</p>
<p>The other place with links is the footer partial, <code>_footer.html.erb</code>, which has links for the About and Contact pages (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-footer_partial_links" class="hyperref">Listing&nbsp;<span class="ref">5.28</span></a>).</p>
<div class="codelisting" id="_code-footer_partial_links" data-tralics-id="uid399" data-number="5.28"><div class="heading"><span class="number">Listing 5.28:</span> 

<span class="description">Footer partial with links.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/layouts/_footer.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;footer</span> <span class="na">class=</span><span class="s">"footer"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;small&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://railstutorial.org/"</span><span class="nt">&gt;</span>Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    by Michael Hartl
  <span class="nt">&lt;/small&gt;</span>
  <span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span>   <span class="n">about_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Contact"</span><span class="p">,</span> <span class="n">contact_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
      <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"http://news.railstutorial.org/"</span><span class="nt">&gt;</span>News<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</pre></div></div></div><p>With that, our layout has links to all the static pages created in <a href="http://www.railstutorial.org/book/static_pages#cha-static_pages" class="hyperref">Chapter&nbsp;<span class="ref">3</span></a>, so that, for example, <a href="http://localhost:3000/about">/about</a> goes to the About page (<a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-about_page" class="hyperref">Figure&nbsp;<span class="ref">5.8</span></a>).</p>
<p>By the way, it’s worth noting that, although we haven’t actually tested for the presence of the links on the layout, our tests will fail if the routes aren’t defined.<span class="intersentencespace"></span> You can check this by commenting out the routes in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-static_page_routes" class="hyperref">Listing&nbsp;<span class="ref">5.24</span></a> and running your test suite.<span class="intersentencespace"></span> For a testing method that actually makes sure the links go to the right places, see <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_exercises" class="hyperref">Section&nbsp;<span class="ref">5.6</span></a>.</p>
<div class="center figure" id="_fig-about_page" data-tralics-id="uid400" data-number="5.8">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/about_page_styled.png" alt="images/figures/about_page_styled"></div><div class="caption"><span class="header">Figure 5.8: </span><span class="description">The About page at <a href="http://localhost:3000/about">/about</a>.
</span></div></div>
</div>
<div id="_sec-pretty_rspec" data-tralics-id="uid401" class="subsection" data-number="5.3.4"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-pretty_rspec" class="heading hyperref"><span class="number">5.3.4 </span>Pretty RSpec</a></h3>
<p>We noted in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-route_tests" class="hyperref">Section&nbsp;<span class="ref">5.3.1</span></a> that the tests for the static pages are getting a little verbose and repetitive (<a href="./Ruby on Rails Tutorial   Softcover.io_files/Ruby on Rails Tutorial   Softcover.io.html" class="hyperref">Listing&nbsp;<span class="ref">5.23</span></a>).<span class="intersentencespace"></span> In this section we’ll make use of the latest features of RSpec to make our tests more compact and elegant.</p>
<p>Let’s take a look at a couple of the examples to see how they can be improved:</p>
<div class="code"><div class="highlight"><pre><span class="n">describe</span> <span class="s2">"Home page"</span> <span class="k">do</span>

  <span class="n">it</span> <span class="s2">"should have the content 'Sample App'"</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">"should have the base title"</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">"should not have a custom page title"</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">'| Home'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>
<p>One thing we notice is that all three examples include a visit to the root path.<span class="intersentencespace"></span> We can eliminate this duplication with a <code>before</code> block:</p>
<div class="code"><div class="highlight"><pre><span class="n">describe</span> <span class="s2">"Home page"</span> <span class="k">do</span>
  <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

  <span class="n">it</span> <span class="s2">"should have the content 'Sample App'"</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">"should have the base title"</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">it</span> <span class="s2">"should not have a custom page title"</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">not_to</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">'| Home'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div>
<p>This uses the line</p>
<div class="code"><div class="highlight"><pre><span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>
</pre></div></div>
<p>to visit the root path before each example.<span class="intersentencespace"></span> (The <code>before</code> method can also be invoked with <code>before(:each)</code>, which is a synonym.)</p>
<p>Another source of duplication appears in each example; we have both</p>
<div class="code"><div class="highlight"><pre><span class="n">it</span> <span class="s2">"should have the content 'Sample App'"</span> <span class="k">do</span>
</pre></div></div>
<p>and</p>
<div class="code"><div class="highlight"><pre><span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span>
</pre></div></div>
<p>which say essentially the same thing.<span class="intersentencespace"></span> In addition, both examples reference the <code>page</code> variable.<span class="intersentencespace"></span> We can eliminate these sources of duplication by telling RSpec that <code>page</code> is the <em>subject</em> of the tests using</p>
<div class="code"><div class="highlight"><pre><span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>
</pre></div></div>
<p>and then using a variant of the <code>it</code> method to collapse the code and description into one line:</p>
<div class="code"><div class="highlight"><pre><span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span> <span class="p">}</span>
</pre></div></div>
<p>Because of <code>subject { page }</code>, the call to <code>should</code> automatically uses the <code>page</code> variable supplied by Capybara (<a href="http://www.railstutorial.org/book/static_pages#sec-TDD" class="hyperref">Section&nbsp;<span class="ref">3.2.1</span></a>).</p>
<p>Applying these changes gives much more compact tests for the Home page:</p>
<div class="code"><div class="highlight"><pre>  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">"Home page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="s2">"Ruby on Rails Tutorial Sample App"</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">'| Home'</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
</pre></div></div>
<p>This code looks nicer, but the title test is still a bit long.<span class="intersentencespace"></span> Indeed, most of the title tests in <a href="./Ruby on Rails Tutorial   Softcover.io_files/Ruby on Rails Tutorial   Softcover.io.html" class="hyperref">Listing&nbsp;<span class="ref">5.23</span></a> have long title text of the form</p>
<div class="code"><div class="highlight"><pre><span class="s2">"Ruby on Rails Tutorial Sample App | About"</span>
</pre></div></div>
<p>An exercise in <a href="http://www.railstutorial.org/book/static_pages#sec-static_pages_exercises" class="hyperref">Section&nbsp;<span class="ref">3.5</span></a> proposes eliminating some of this duplication by defining a <code>base_title</code> variable and using string interpolation (<a href="http://www.railstutorial.org/book/static_pages#code-pages_controller_spec_exercise" class="hyperref">Listing&nbsp;<span class="ref">3.31</span></a>).<span class="intersentencespace"></span> We can do even better by defining a <code>full_title</code>, which parallels the <code>full_title</code> helper from <a href="http://www.railstutorial.org/book/rails_flavored_ruby#code-title_helper" class="hyperref">Listing&nbsp;<span class="ref">4.2</span></a>.<span class="intersentencespace"></span> We do this by creating both a <code>spec/support</code> directory and a <code>utilities.rb</code> file for RSpec utilities (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-rspec_utilities" class="hyperref">Listing&nbsp;<span class="ref">5.29</span></a>).</p>
<div class="codelisting" id="_code-rspec_utilities" data-tralics-id="uid402" data-number="5.29"><div class="heading"><span class="number">Listing 5.29:</span> 

<span class="description">A file for RSpec utilities with a <code>full_title</code> function.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/support/utilities.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">def</span> <span class="nf">full_title</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
  <span class="n">base_title</span> <span class="o">=</span> <span class="s2">"Ruby on Rails Tutorial Sample App"</span>
  <span class="k">if</span> <span class="n">page_title</span><span class="o">.</span><span class="n">empty?</span>
    <span class="n">base_title</span>
  <span class="k">else</span>
    <span class="s2">"</span><span class="si">#{</span><span class="n">base_title</span><span class="si">}</span><span class="s2"> | </span><span class="si">#{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><p>Of course, this is essentially a duplicate of the helper in <a href="http://www.railstutorial.org/book/rails_flavored_ruby#code-title_helper" class="hyperref">Listing&nbsp;<span class="ref">4.2</span></a>, but having two independent methods allows us to catch any typos in the base title.<span class="intersentencespace"></span> This is dubious design, though, and a better (slightly more advanced) approach, which tests the original <code>full_title</code> helper directly, appears in the exercises (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_exercises" class="hyperref">Section&nbsp;<span class="ref">5.6</span></a>).</p>
<p>Files in the <code>spec/support</code> directory are automatically included by RSpec, which means that we can write the Home tests as follows:</p>
<div class="code"><div class="highlight"><pre>  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">"Home page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">''</span><span class="p">))</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">'| Home'</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
</pre></div></div>
<p>We can now simplify the tests for the Help, About, and Contact pages using the same methods used for the Home page.<span class="intersentencespace"></span> The results appear in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-pretty_page_tests" class="hyperref">Listing&nbsp;<span class="ref">5.30</span></a>.</p>
<div class="codelisting" id="_code-pretty_page_tests" data-tralics-id="uid403" data-number="5.30"><div class="heading"><span class="number">Listing 5.30:</span> 

<span class="description">Prettier tests for the static pages.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/requests/static_pages_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="s2">"Static pages"</span> <span class="k">do</span>

  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">"Home page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sample App'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">''</span><span class="p">))</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">'| Home'</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"Help page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">help_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Help'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">'Help'</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"About page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">about_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'About'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">'About Us'</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"Contact page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">contact_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Contact'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">'Contact'</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><p>You should now verify that the tests still pass:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/static_pages_spec.rb
</pre></div></div>
<p>This RSpec style in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-pretty_page_tests" class="hyperref">Listing&nbsp;<span class="ref">5.30</span></a> is much pithier than the style in <a href="./Ruby on Rails Tutorial   Softcover.io_files/Ruby on Rails Tutorial   Softcover.io.html" class="hyperref">Listing&nbsp;<span class="ref">5.23</span></a>—indeed, it can be made even pithier (<a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_exercises" class="hyperref">Section&nbsp;<span class="ref">5.6</span></a>).<span class="intersentencespace"></span> We will use this more compact style whenever possible when developing the rest of the sample application.</p>
</div></div><div id="_sec-user_signup" data-tralics-id="cid30" class="section" data-number="5.4"><h2><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-user_signup" class="heading hyperref"><span class="number">5.4 </span>User signup: A first step</a></h2>
<p>As a capstone to our work on the layout and routing, in this section we’ll make a route for the signup page, which will mean creating a second controller along the way.<span class="intersentencespace"></span> This is a first important step toward allowing users to register for our site; we’ll take the next step, modeling users, in <a href="http://www.railstutorial.org/book/modeling_users#cha-modeling_users" class="hyperref">Chapter&nbsp;<span class="ref">6</span></a>, and we’ll finish the job in <a href="http://www.railstutorial.org/book/sign_up#cha-sign_up" class="hyperref">Chapter&nbsp;<span class="ref">7</span></a>.</p>
<div id="_sec-users_controller" data-tralics-id="uid404" class="subsection" data-number="5.4.1"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-users_controller" class="heading hyperref"><span class="number">5.4.1 </span>Users controller</a></h3>
<p>It’s been a while since we created our first controller, the StaticPages controller, way back in <a href="http://www.railstutorial.org/book/static_pages#sec-static_pages" class="hyperref">Section&nbsp;<span class="ref">3.1</span></a>.<span class="intersentencespace"></span> It’s time to create a second one, the Users controller.<span class="intersentencespace"></span> As before, we’ll use <code>generate</code> to make the simplest controller that meets our present needs, namely, one with a stub signup page for new users.<span class="intersentencespace"></span> Following the conventional <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST architecture</a> favored by Rails, we’ll call the action for new users <code>new</code> and pass it as an argument to <code>generate controller</code> to create it automatically (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-generate_users_controller" class="hyperref">Listing&nbsp;<span class="ref">5.31</span></a>).</p>
<div class="codelisting" id="_code-generate_users_controller" data-tralics-id="uid405" data-number="5.31"><div class="heading"><span class="number">Listing 5.31:</span> 

<span class="description">Generating a Users controller (with a <code>new</code> action).</span>
</div>

<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate controller Users new --no-test-framework
<span class="go">      create  app/controllers/users_controller.rb</span>
<span class="go">       route  get "users/new"</span>
<span class="go">      invoke  erb</span>
<span class="go">      create    app/views/users</span>
<span class="go">      create    app/views/users/new.html.erb</span>
<span class="go">      invoke  helper</span>
<span class="go">      create    app/helpers/users_helper.rb</span>
<span class="go">      invoke  assets</span>
<span class="go">      invoke    coffee</span>
<span class="go">      create      app/assets/javascripts/users.js.coffee</span>
<span class="go">      invoke    scss</span>
<span class="go">      create      app/assets/stylesheets/users.css.scss</span>
</pre></div></div></div><p>This creates a Users controller with a <code>new</code> action (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-initial_users_controller" class="hyperref">Listing&nbsp;<span class="ref">5.32</span></a>) and a stub user view (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-initial_new_action" class="hyperref">Listing&nbsp;<span class="ref">5.33</span></a>).</p>
<div class="codelisting" id="_code-initial_users_controller" data-tralics-id="uid406" data-number="5.32"><div class="heading"><span class="number">Listing 5.32:</span> 

<span class="description">The initial Users controller, with a <code>new</code> action.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/controllers/users_controller.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">new</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div></div></div><div class="codelisting" id="_code-initial_new_action" data-tralics-id="uid407" data-number="5.33"><div class="heading"><span class="number">Listing 5.33:</span> 

<span class="description">The initial <code>new</code> view for Users.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/users/new.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Users#new<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Find me in app/views/users/new.html.erb<span class="nt">&lt;/p&gt;</span>
</pre></div></div></div></div>
<div id="_sec-signup_url" data-tralics-id="uid408" class="subsection" data-number="5.4.2"><h3><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-signup_url" class="heading hyperref"><span class="number">5.4.2 </span>Signup URL</a></h3>
<p>With the code from <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-users_controller" class="hyperref">Section&nbsp;<span class="ref">5.4.1</span></a>, we already have a working page for new users at /users/new, but recall from <a href="http://www.railstutorial.org/book/filling_in_the_layout#table-url_mapping" class="hyperref">Table&nbsp;<span class="ref">5.6</span></a> that we want the URL to be /signup instead.<span class="intersentencespace"></span> As in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_links" class="hyperref">Section&nbsp;<span class="ref">5.3</span></a>, we’ll first write some integration tests, which we’ll now generate:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> rails generate integration_test user_pages
</pre></div></div>
<p>Then, following the model of the static pages spec in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-pretty_page_tests" class="hyperref">Listing&nbsp;<span class="ref">5.30</span></a>, we’ll fill in the user pages test with code to test for the contents of the <code>h1</code> and <code>title</code> tags, as seen in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-user_pages_spec" class="hyperref">Listing&nbsp;<span class="ref">5.34</span></a>.</p>
<div class="codelisting" id="_code-user_pages_spec" data-tralics-id="uid409" data-number="5.34"><div class="heading"><span class="number">Listing 5.34:</span> 

<span class="description">The initial spec for users, with a test for the signup page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/requests/user_pages_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="s2">"User pages"</span> <span class="k">do</span>

  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">describe</span> <span class="s2">"signup page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">signup_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_content</span><span class="p">(</span><span class="s1">'Sign up'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">'Sign up'</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><p>We can run these tests using the <code>rspec</code> command as usual:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/user_pages_spec.rb
</pre></div></div>
<p>It’s worth noting that we can also run all the request specs by passing the whole directory instead of just one file:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/requests/
</pre></div></div>
<p>Based on this pattern, you may be able to guess how to run <em>all</em> the specs:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/
</pre></div></div>
<p>For completeness, we’ll usually use this method to run the tests through the rest of the tutorial.<span class="intersentencespace"></span> By the way, it’s worth noting (since you may see other people use it) that you can also run the test suite using the <code>spec</code> Rake task:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rake spec
</pre></div></div>
<p>(In fact, you can just type <code>rake</code> by itself; the default behavior of <code>rake</code> is to run the test suite.)<span class="intersentencespace"></span> The only caveat is that using <code>rake</code> to run the tests for the current sample application will raise an error since it requires the test database to be prepared properly, a step we’ll defer to <a href="http://www.railstutorial.org/book/modeling_users#sec-initial_user_tests" class="hyperref">Section&nbsp;<span class="ref">6.2.1</span></a>.</p>
<p>By construction, the Users controller already has a <code>new</code> action, so to get the test to pass all we need is the right route and the right view content.<span class="intersentencespace"></span> We’ll follow the examples from <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-static_page_routes" class="hyperref">Listing&nbsp;<span class="ref">5.24</span></a> and add a <code>match ’/signup’</code> rule for the signup URL (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-signup_route" class="hyperref">Listing&nbsp;<span class="ref">5.35</span></a>).</p>
<div class="codelisting" id="_code-signup_route" data-tralics-id="uid410" data-number="5.35"><div class="heading"><span class="number">Listing 5.35:</span> 

<span class="description">A route for the signup page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">config/routes.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="ss">SampleApp</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"users/new"</span>

  <span class="n">root</span>  <span class="s1">'static_pages#home'</span>
  <span class="n">match</span> <span class="s1">'/signup'</span><span class="p">,</span>  <span class="ss">to</span><span class="p">:</span> <span class="s1">'users#new'</span><span class="p">,</span>            <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="n">match</span> <span class="s1">'/help'</span><span class="p">,</span>    <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#help'</span><span class="p">,</span>    <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="n">match</span> <span class="s1">'/about'</span><span class="p">,</span>   <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#about'</span><span class="p">,</span>   <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="n">match</span> <span class="s1">'/contact'</span><span class="p">,</span> <span class="ss">to</span><span class="p">:</span> <span class="s1">'static_pages#contact'</span><span class="p">,</span> <span class="ss">via</span><span class="p">:</span> <span class="s1">'get'</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
<span class="k">end</span>
</pre></div></div></div><p>Note that we have kept the rule <code>get "users/new"</code>, which was generated automatically by the Users controller generation in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-generate_users_controller" class="hyperref">Listing&nbsp;<span class="ref">5.31</span></a>.<span class="intersentencespace"></span> Currently, this rule is necessary for the <code>’users/new’</code> routing to work, but it doesn’t follow the proper REST conventions (<a href="http://www.railstutorial.org/book/demo_app#table-demo_RESTful_users" class="hyperref">Table&nbsp;<span class="ref">2.3</span></a>), and we will eliminate it in <a href="http://www.railstutorial.org/book/sign_up#sec-a_users_resource" class="hyperref">Section&nbsp;<span class="ref">7.1.2</span></a>.</p>
<p>To get the tests to pass, all we need now is a view with the title and heading “Sign up” (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-initial_signup_page" class="hyperref">Listing&nbsp;<span class="ref">5.36</span></a>).</p>
<div class="codelisting" id="_code-initial_signup_page" data-tralics-id="uid411" data-number="5.36"><div class="heading"><span class="number">Listing 5.36:</span> 

<span class="description">The initial (stub) signup page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/users/new.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="cp">&lt;%</span> <span class="n">provide</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="s1">'Sign up'</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;h1&gt;</span>Sign up<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Find me in app/views/users/new.html.erb<span class="nt">&lt;/p&gt;</span>
</pre></div></div></div><p>At this point, the signup test in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-user_pages_spec" class="hyperref">Listing&nbsp;<span class="ref">5.34</span></a> should pass.<span class="intersentencespace"></span> All that’s left is to add the proper link to the button on the Home page.<span class="intersentencespace"></span> As with the other routes, <code>match ’/signup’</code> gives us the named route <code>signup_path</code>, which we put to use in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-home_page_signup_link" class="hyperref">Listing&nbsp;<span class="ref">5.37</span></a>.</p>
<div class="codelisting" id="_code-home_page_signup_link" data-tralics-id="uid412" data-number="5.37"><div class="heading"><span class="number">Listing 5.37:</span> 

<span class="description">Linking the button to the Signup page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">app/views/static_pages/home.html.erb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"center hero-unit"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Welcome to the Sample App<span class="nt">&lt;/h1&gt;</span>

  <span class="nt">&lt;h2&gt;</span>
    This is the home page for the
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://railstutorial.org/"</span><span class="nt">&gt;</span>Ruby on Rails Tutorial<span class="nt">&lt;/a&gt;</span>
    sample application.
  <span class="nt">&lt;/h2&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign up now!"</span><span class="p">,</span> <span class="n">signup_path</span><span class="p">,</span> <span class="ss">class</span><span class="p">:</span> <span class="s2">"btn btn-large btn-primary"</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">image_tag</span><span class="p">(</span><span class="s2">"rails.png"</span><span class="p">,</span> <span class="ss">alt</span><span class="p">:</span> <span class="s2">"Rails"</span><span class="p">),</span> <span class="s1">'http://rubyonrails.org/'</span> <span class="cp">%&gt;</span>
</pre></div></div></div><p>With that, we’re done with the links and named routes, at least until we add a route for signing in (<a href="http://www.railstutorial.org/book/sign_in_out#cha-sign_in_sign_out" class="hyperref">Chapter&nbsp;<span class="ref">8</span></a>).<span class="intersentencespace"></span> The resulting new user page (at the URL /signup) appears in <a href="http://www.railstutorial.org/book/filling_in_the_layout#fig-new_signup_page" class="hyperref">Figure&nbsp;<span class="ref">5.9</span></a>.</p>
<div class="center figure" id="_fig-new_signup_page" data-tralics-id="uid413" data-number="5.9">
<div class="graphics image box"><img src="./Ruby on Rails Tutorial   Softcover.io_files/new_signup_page_bootstrap.png" alt="images/figures/new_signup_page_bootstrap"></div><div class="caption"><span class="header">Figure 5.9: </span><span class="description">The new signup page at <a href="http://localhost:3000/signup">/signup</a>.
</span></div></div>
<p>At this point the tests should pass:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> bundle <span class="nb">exec </span>rspec spec/
</pre></div></div>
</div></div><div id="_sec-layout_conclusion" data-tralics-id="cid31" class="section" data-number="5.5"><h2><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_conclusion" class="heading hyperref"><span class="number">5.5 </span>Conclusion</a></h2>
<p>In this chapter, we’ve hammered our application layout into shape and polished up the routes.<span class="intersentencespace"></span> The rest of the book is dedicated to fleshing out the sample application: first, by adding users who can sign up, sign in, and sign out; next, by adding user microposts; and, finally, by adding the ability to follow other users.</p>
<p>At this point, if you are using Git you should merge the changes back into the master branch:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> git add .
<span class="gp">$</span> git commit -m <span class="s2">"Finish layout and routes"</span>
<span class="gp">$</span> git checkout master
<span class="gp">$</span> git merge filling-in-layout
</pre></div></div>
<p>You can also push up to GitHub:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push
</pre></div></div>
<p>Finally, you can deploy to Heroku:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> git push heroku
</pre></div></div>
<p>The result should be a working sample application on the production server:</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku open
</pre></div></div>
<p>If you run into trouble, try running</p>
<div class="code"><div class="highlight"><pre><span class="gp">$</span> heroku logs
</pre></div></div>
<p>to debug the error using the Heroku logfile.</p>
</div><div id="_sec-layout_exercises" data-tralics-id="cid32" class="section" data-number="5.6"><h2><a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_exercises" class="heading hyperref"><span class="number">5.6 </span>Exercises</a></h2>
<ol><li>We saw in <a href="http://www.railstutorial.org/book/filling_in_the_layout#sec-layout_links" class="hyperref">Section&nbsp;<span class="ref">5.3</span></a> that the <code>have_content</code> RSpec matcher sometimes matches <em>too</em> broadly, leading us to temporarily comment out the “Contact” line in the footer to avoid an erroneous passing test (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-comment_out_footer" class="hyperref">Listing&nbsp;<span class="ref">5.18</span></a>).<span class="intersentencespace"></span> To fix this, <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_test_have_selector" class="hyperref">Listing&nbsp;<span class="ref">5.38</span></a> introduces Capybara’s <code>have_selector</code> method, which allows us to test the presence of specific HTML tags.<span class="intersentencespace"></span> By deleting and then restoring the “Contact” <code>h1</code> in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_view" class="hyperref">Listing&nbsp;<span class="ref">5.21</span></a>, verify that the code in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_test_have_selector" class="hyperref">Listing&nbsp;<span class="ref">5.38</span></a> correctly fails even when the footer isn’t commented out.
</li>
<li>The code in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-pretty_page_tests" class="hyperref">Listing&nbsp;<span class="ref">5.30</span></a> for testing static pages is compact but is still a bit repetitive.<span class="intersentencespace"></span> RSpec supports a facility called <em>shared examples</em> to eliminate this kind of duplication.<span class="intersentencespace"></span> By following the example in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-static_pages_spec_shared_example" class="hyperref">Listing&nbsp;<span class="ref">5.39</span></a>, fill in the missing tests for the About and Contact pages.<span class="intersentencespace"></span> Note that the <code>let</code> command, introduced briefly in <a href="http://www.railstutorial.org/book/static_pages#code-pages_controller_spec_exercise" class="hyperref">Listing&nbsp;<span class="ref">3.31</span></a>, creates a local variable with the given value on demand (i.e., when the variable is used), in contrast to an instance variable, which is created upon assignment.<span class="intersentencespace"></span> (<a href="http://www.railstutorial.org/book/filling_in_the_layout#code-static_pages_spec_shared_example" class="hyperref">Listing&nbsp;<span class="ref">5.39</span></a> also incorporates the use of <code>have_selector</code> from <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-contact_test_have_selector" class="hyperref">Listing&nbsp;<span class="ref">5.38</span></a>.)
</li>
<li>You may have noticed that our tests for the layout links test the routing but don’t actually check that the links on the layout go to the right pages.<span class="intersentencespace"></span> One way to implement these tests is to use <code>visit</code> and <code>click_link</code> inside the RSpec integration test.<span class="intersentencespace"></span> Fill in the code in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-layout_links_test" class="hyperref">Listing&nbsp;<span class="ref">5.40</span></a> to verify that all the layout links are properly defined.
</li>
<li>Eliminate the need for the <code>full_title</code> test helper in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-rspec_utilities" class="hyperref">Listing&nbsp;<span class="ref">5.29</span></a> by writing tests for the original helper method, as shown in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-full_title_helper_tests" class="hyperref">Listing&nbsp;<span class="ref">5.41</span></a>.<span class="intersentencespace"></span> (You will have to create both the <code>spec/helpers</code> directory and the <code>application_helper_spec.rb</code> file.)<span class="intersentencespace"></span> Then <code>include</code> it into the test using the code in <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-rspec_utilities_simplified" class="hyperref">Listing&nbsp;<span class="ref">5.42</span></a>.<span class="intersentencespace"></span> Verify by running the test suite that the new code is still valid.<span class="intersentencespace"></span> <em>Note</em>: <a href="http://www.railstutorial.org/book/filling_in_the_layout#code-full_title_helper_tests" class="hyperref">Listing&nbsp;<span class="ref">5.41</span></a> uses <em>regular expressions</em>, which we’ll learn more about in <a href="http://www.railstutorial.org/book/modeling_users#sec-format_validation" class="hyperref">Section&nbsp;<span class="ref">6.2.4</span></a>.<span class="intersentencespace"></span> (Thanks to <a href="http://alexchaffee.com/">Alex Chaffee</a> for the suggestion and code used in this exercise.)
</li></ol><div class="codelisting" id="_code-contact_test_have_selector" data-tralics-id="uid418" data-number="5.38"><div class="heading"><span class="number">Listing 5.38:</span> 

<span class="description">A more specific test for the Contact page.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/requests/static_pages_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="s2">"Static pages"</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">describe</span> <span class="s2">"Contact page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">contact_path</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">'h1'</span><span class="p">,</span> <span class="ss">text</span><span class="p">:</span> <span class="s1">'Contact'</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">'Contact'</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><div class="codelisting" id="_code-static_pages_spec_shared_example" data-tralics-id="uid419" data-number="5.39"><div class="heading"><span class="number">Listing 5.39:</span> 

<span class="description">Using an RSpec shared example to eliminate test duplication.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/requests/static_pages_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="s2">"Static pages"</span> <span class="k">do</span>

  <span class="n">subject</span> <span class="p">{</span> <span class="n">page</span> <span class="p">}</span>

  <span class="n">shared_examples_for</span> <span class="s2">"all static pages"</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_selector</span><span class="p">(</span><span class="s1">'h1'</span><span class="p">,</span> <span class="ss">text</span><span class="p">:</span> <span class="n">heading</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="n">page_title</span><span class="p">))</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"Home page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">root_path</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:heading</span><span class="p">)</span>    <span class="p">{</span> <span class="s1">'Sample App'</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:page_title</span><span class="p">)</span> <span class="p">{</span> <span class="s1">''</span> <span class="p">}</span>

    <span class="n">it_should_behave_like</span> <span class="s2">"all static pages"</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">have_title</span><span class="p">(</span><span class="s1">'| Home'</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"Help page"</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">visit</span> <span class="n">help_path</span> <span class="p">}</span>

    <span class="n">let</span><span class="p">(</span><span class="ss">:heading</span><span class="p">)</span>    <span class="p">{</span> <span class="s1">'Help'</span> <span class="p">}</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:page_title</span><span class="p">)</span> <span class="p">{</span> <span class="s1">'Help'</span> <span class="p">}</span>

    <span class="n">it_should_behave_like</span> <span class="s2">"all static pages"</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"About page"</span> <span class="k">do</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s2">"Contact page"</span> <span class="k">do</span>
    <span class="o">.</span>
    <span class="o">.</span>
    <span class="o">.</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><div class="codelisting" id="_code-layout_links_test" data-tralics-id="uid420" data-number="5.40"><div class="heading"><span class="number">Listing 5.40:</span> 

<span class="description">A test for the links on the layout.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/requests/static_pages_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="s2">"Static pages"</span> <span class="k">do</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="o">.</span>
  <span class="n">it</span> <span class="s2">"should have the right links on the layout"</span> <span class="k">do</span>
    <span class="n">visit</span> <span class="n">root_path</span>
    <span class="n">click_link</span> <span class="s2">"About"</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">have_title</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s1">'About Us'</span><span class="p">))</span>
    <span class="n">click_link</span> <span class="s2">"Help"</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">"Contact"</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">"Home"</span>
    <span class="n">click_link</span> <span class="s2">"Sign up now!"</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
    <span class="n">click_link</span> <span class="s2">"sample app"</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">page</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="c1"># fill in</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><div class="codelisting" id="_code-full_title_helper_tests" data-tralics-id="uid421" data-number="5.41"><div class="heading"><span class="number">Listing 5.41:</span> 

<span class="description">Tests for the <code>full_title</code> helper.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/helpers/application_helper_spec.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="nb">require</span> <span class="s1">'spec_helper'</span>

<span class="n">describe</span> <span class="no">ApplicationHelper</span> <span class="k">do</span>

  <span class="n">describe</span> <span class="s2">"full_title"</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s2">"should include the page title"</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/foo/</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should include the base title"</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^Ruby on Rails Tutorial Sample App/</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="n">it</span> <span class="s2">"should not include a bar for the home page"</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">full_title</span><span class="p">(</span><span class="s2">""</span><span class="p">))</span><span class="o">.</span><span class="n">not_to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/\|/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div></div></div><div class="codelisting" id="_code-rspec_utilities_simplified" data-tralics-id="uid422" data-number="5.42"><div class="heading"><span class="number">Listing 5.42:</span> 

<span class="description">Replacing the <code>full_title</code> test helper with a simple <code>include</code>.<span class="intersentencespace"></span> <span class="break"></span> <span class="filepath">spec/support/utilities.rb</span></span>
</div>

<div class="code"><div class="highlight"><pre><span class="kp">include</span> <span class="no">ApplicationHelper</span>
</pre></div></div></div></div><div id="cha-5_footnotes">
  <ol class="footnotes"><li id="_cha-5_footnote-1">Thanks to reader <a href="https://twitter.com/colmtuite">Colm Tuite</a> for his excellent work in helping to convert the sample application over to Bootstrap.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-1">↑</a></li>
    <li id="_cha-5_footnote-2">The mockups in the <em>Ruby on Rails Tutorial</em> are made with an excellent online mockup application called <a href="http://gomockingbird.com/">Mockingbird</a>.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-2">↑</a></li>
    <li id="_cha-5_footnote-3">These are completely unrelated to Ruby classes.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-3">↑</a></li>
    <li id="_cha-5_footnote-4">You might notice that the <code>img</code> tag, rather than looking like <span class="inline_verbatim">&lt;img&gt;...&lt;/img&gt;</span>, instead looks like <span class="inline_verbatim">&lt;img ... /&gt;</span>.<span class="intersentencespace"></span> Tags that follow this form are known as <em>self-closing</em> tags.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-4">↑</a></li>
    <li id="_cha-5_footnote-5">It is also possible to use LESS with the asset pipeline; see the <a href="http://rubygems.org/gems/less-rails-bootstrap"><span class="tt">less-rails-bootstrap</span> gem</a> for details.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-5">↑</a></li>
    <li id="_cha-5_footnote-6">Many Rails developers use a <code>shared</code> directory for partials shared across different views.<span class="intersentencespace"></span> I prefer to use the <code>shared</code> folder for utility partials that are useful on multiple views, while putting partials that are literally on every page (as part of the site layout) in the <code>layouts</code> directory.<span class="intersentencespace"></span> (We’ll create the <code>shared</code> directory starting in <a href="http://www.railstutorial.org/book/sign_up#cha-sign_up" class="hyperref">Chapter&nbsp;<span class="ref">7</span></a>.)<span class="intersentencespace"></span> That seems to me a logical division, but putting them all in the <code>shared</code> folder certainly works fine, too.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-6">↑</a></li>
    <li id="_cha-5_footnote-7">You may wonder why we use both the <code>footer</code> tag and <code>.footer</code> class.<span class="intersentencespace"></span> The answer is that the tag has a clear meaning to human readers, and the class is used by Bootstrap.<span class="intersentencespace"></span> Using a <code>div</code> tag in place of <code>footer</code> would work as well.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-7">↑</a></li>
    <li id="_cha-5_footnote-8">The structure of this section is based on the excellent blog post “The Rails 3 Asset Pipeline in (about) 5 Minutes” by Michael Erasmus.<span class="intersentencespace"></span> For more details, see the <a href="http://guides.rubyonrails.org/asset_pipeline.html">Rails Guide on the Asset Pipeline</a>.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-8">↑</a></li>
    <li id="_cha-5_footnote-9">The older <code>.sass</code> format, also supported by Sass, defines a new language which is less verbose (and has fewer curly braces) but is less convenient for existing projects and is harder to learn for those already familiar with CSS.&nbsp;<a class="arrow" href="http://www.railstutorial.org/book/filling_in_the_layout#cha-5_footnote-ref-9">↑</a></li>
  </ol></div></div></div>
<div id="bookBottomMenu">
<div class="bookMenuArows">
<a href="javascript://" class="leftArrow">◄</a>
<a href="javascript://" class="upArrow">▲</a>
<a href="javascript://" class="rightArrow">►</a>
</div>
</div>
<div id="bookContentNotAvailable" style="display:none">
Sorry, this content is not currently available.
</div>
</div>
</div>
<script>
  // setup book nav
  var navVisible = false;
  var offsetHeight = $('#bookMenu').offset().top;
  $(window).scroll(function(){
    if($(window).scrollTop() > $('#bookMenu').offset().top && !navVisible){
      $('#bookMenu').addClass('bookMenuFixed');
      navVisible = true;
    } else if($(window).scrollTop() < offsetHeight && navVisible) {
      $('#bookMenu').removeClass('bookMenuFixed');
      navVisible = false;
    }
  });
  
  Book.init({
    path: "/book",
    slug: "ruby_on_rails_tutorial",
    s3_path_prefix: "636/ruby_on_rails_tutorial",
    chapters: [{"title":"Frontmatter\n","number":0,"slug":"frontmatter","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/frontmatter_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=/a3fAhfy2roknl697IsKWMQVRIU%3D&Expires=1400543742"},{"title":"Chapter 1: From zero to deploy\n","number":1,"slug":"beginning","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/beginning_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=6OIjbPSJF//AukbKDGw0OBAdMeA%3D&Expires=1400543742"},{"title":"Chapter 2: A demo app\n","number":2,"slug":"demo_app","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/demo_app_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=67mDKPJhAzANNrp5xAFe4P%2BMe/U%3D&Expires=1400543742"},{"title":"Chapter 3: Mostly static pages\n","number":3,"slug":"static_pages","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/static_pages_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=9pa9SeMFq21/3g8GL%2BQ7U5IczTA%3D&Expires=1400543742"},{"title":"Chapter 4: Rails-flavored Ruby\n","number":4,"slug":"rails_flavored_ruby","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/rails_flavored_ruby_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=Y4dERKvok0OW/DcwhKWSgBPQiqo%3D&Expires=1400543742"},{"title":"Chapter 5: Filling in the layout\n","number":5,"slug":"filling_in_the_layout","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/filling_in_the_layout_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=YBHkUGsvbxBgZxSIctMqcvyHRfM%3D&Expires=1400543742"},{"title":"Chapter 6: Modeling users\n","number":6,"slug":"modeling_users","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/modeling_users_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=SUxjxH%2BWgnvZse5QnDFU8tR0t2I%3D&Expires=1400543742"},{"title":"Chapter 7: Sign up\n","number":7,"slug":"sign_up","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/sign_up_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=XGM0k9qCC2y5JMtcTZvOUjUOkQk%3D&Expires=1400543742"},{"title":"Chapter 8: Sign in, sign out\n","number":8,"slug":"sign_in_out","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/sign_in_out_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=B%2BEQ9xZzK0Dni5%2B/MjZdIs5HBYs%3D&Expires=1400543742"},{"title":"Chapter 9: Updating, showing, and deleting users\n","number":9,"slug":"updating_and_deleting_users","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/updating_and_deleting_users_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=Nz8Vt%2BuOL7oSh1FTwpOazqc1S%2BI%3D&Expires=1400543742"},{"title":"Chapter 10: User microposts\n","number":10,"slug":"user_microposts","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/user_microposts_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=mxOvRu9CoU4%2B1lGqbrtRa/OPE2Y%3D&Expires=1400543742"},{"title":"Chapter 11: Following users\n","number":11,"slug":"following_users","s3_url":"https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/html/following_users_fragment.html?AWSAccessKeyId=AKIAJMNNDDBSYVXVHGAA&Signature=DAoj%2B58LqZaYaeDF9RgyWTo95zY%3D&Expires=1400543742"}],
    full_page: false
  });
</script>

</div>
</div>
<div class="footer clearfix">
<div class="wrapper" id="hide_chromeFooter">
<em>powered by</em>
<a href="http://www.softcover.io/" class="logo"><img alt="Logo_foot" src="./Ruby on Rails Tutorial   Softcover.io_files/logo_foot-39da4a3be1566a91864f2712656b404e.png">
</a></div>
</div>

<script type="text/javascript">
  var _sf_async_config = { uid: 9895, domain: 'softcover.io', useCanonical: true };
  (function() {
    function loadChartbeat() {
      window._sf_endpt = (new Date()).getTime();
      var e = document.createElement('script');
      e.setAttribute('language', 'javascript');
      e.setAttribute('type', 'text/javascript');
      e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
      document.body.appendChild(e);
    };
    var oldonload = window.onload;
    window.onload = (typeof window.onload != 'function') ?
      loadChartbeat : function() { oldonload(); loadChartbeat(); };
  })();
</script>



<script src="./Ruby on Rails Tutorial   Softcover.io_files/nr-411.min.js"></script><script language="javascript" type="text/javascript" src="./Ruby on Rails Tutorial   Softcover.io_files/chartbeat.js"></script><script type="text/javascript" src="./Ruby on Rails Tutorial   Softcover.io_files/1310fd97f1"></script></body></html>